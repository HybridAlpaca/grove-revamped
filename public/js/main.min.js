webpackJsonp([0],[function(e,t,i){"use strict";var r=i(1),n=i(2),o=i(9),a=e.exports=new Map;a.set("time",Date.now()),a.set("tick",0),a.set("controls",{}),a.set("scene",new r.Scene),a.set("renderer",new r.WebGLRenderer({antialias:!0})),a.set("camera",new r.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,5e3)),a.set("listener",new r.AudioListener),a.get("camera").add(a.get("listener")),a.set("socket",window.io()),a.set("player",{}),a.set("entities",[]),a.set("labels",[]),a.set("tweens",[]),a.set("world",new n.World),a.set("cache",{audio:{},json:{}}),a.set("events",o.channel("events")),a.set("load",function(e,t){t=t||{},e.castShadow=!0,e.receiveShadow=!0;for(var i=[],r=[],o=0;o<e.geometry.vertices.length;o++){var s=e.geometry.vertices[o];i.push(new n.Vec3(s.x,s.y,s.z))}for(var o=0;o<e.geometry.faces.length;o++){var l=e.geometry.faces[o];r.push([l.a,l.b,l.c])}var u=new n.ConvexPolyhedron(i,r),c=new n.Body({mass:t.mass||0,material:t.material||void 0});return c.addShape(u),c.position.copy(e.position),c.quaternion.copy(e.quaternion),a.get("world").add(c),{body:c,shape:u,mesh:e}})},,,,function(e,t,i){"use strict";function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function e(t,i,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,i);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,i,r)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(r)},s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=i(1),u=i(2),c=i(0),p=i(3),d=t.Entity=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Entity",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new l.Object3D,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new u.Body,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(o(this,e),this.id=t,this.uuid=Math.random(),this.events={},this.opts=n,this.sounds=[],this.opts.sounds)for(var a=0;a<this.opts.sounds.length;a++)this.loadAudio(this.opts.sounds[a],a);this.mesh=i,this.mesh.name=this.id,this.body=r,c.get("scene").add(i),c.get("world").add(r),c.get("entities").push(this)}return s(e,[{key:"update",value:function(e){this.mesh.position.copy(this.body.position),this.callEvent("update")}},{key:"remove",value:function(){this.callEvent("remove"),c.get("scene").remove(this.mesh),c.get("world").remove(this.body),c.get("entities").splice(c.get("entities").indexOf(this),1)}},{key:"loadAudio",value:function(e,t){var i=this;if(e)if(c.get("cache").audio[e])this.sounds[t]=new l.PositionalAudio(c.get("listener")),this.sounds[t].setBuffer(c.get("cache").audio[e]),this.sounds[t].setRefDistance(30),this.mesh&&this.mesh.add(this.sounds[t]),this.sounds[t].onEnded(function(){return i.sounds[t].stop()});else{var r=new l.AudioLoader;r.load("/assets/sfx/"+e,function(r){c.get("cache").audio[e]=r,i.sounds[t]=new l.PositionalAudio(c.get("listener")),i.sounds[t].setBuffer(r),i.sounds[t].setRefDistance(30),i.mesh.add(i.sounds[t]),i.sounds[t].onEnded(function(){return i.sounds[t].stop()})})}}},{key:"addEventListener",value:function(e,t){e in this.events||(this.events[e]=[]),this.events[e].push(t)}},{key:"removeEventListener",value:function(e,t){}},{key:"callEvent",value:function(e){if(e in this.events){for(var t=arguments.length,i=Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];var n=!0,o=!1,a=void 0;try{for(var s,l=this.events[e][Symbol.iterator]();!(n=(s=l.next()).done);n=!0){s.value.apply(void 0,i)}}catch(e){o=!0,a=e}finally{try{!n&&l.return&&l.return()}finally{if(o)throw a}}}}}]),e}(),h=t.Living=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Living Entity",i=arguments[1],n=arguments[2],a=arguments[3];o(this,t);var s=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,n,a));return s.lastDamaged=0,s.lastAttacked=0,s.lastUsedStamina=0,s.lastUsedMagic=0,s.hp=Number,s.hpMax=Number,s.mp=Number,s.mpMax=Number,s.stm=Number,s.stmMax=Number,s.lvl=1,s.xp=0,s.xpMax=Math.pow(s.lvl,2)/.04,s.str=Number,s.dex=Number,s.int=Number,s.cnt=Number,s.chr=Number,s.inv=[],s.effects=[],s}return n(t,e),s(t,[{key:"gainXP",value:function(e){this.xp+=e,this.xpMax=Math.pow(this.lvl,2)/.04,this.xp>this.xpMax&&(this.lvl++,this.xp=0,this.callEvent("levelUp"))}},{key:"attack",value:function(e){c.get("controls").enabled&&(e.damage(Math.interval(this.dmg-.2*this.dmg,this.dmg+.2*this.dmg),this),this.lastAttacked=Date.now(),this.callEvent("attack"))}},{key:"damage",value:function(e,t){c.get("controls").enabled&&(this.hp-=e,this.hp<=0&&this.kill(t),this.lastDamaged=Date.now(),this.callEvent("damage"))}},{key:"heal",value:function(e,t,i){c.get("controls").enabled&&(this.hp+=e,this.mp+=i,this.stm+=t,this.hp>=this.hpMax&&(this.hp=this.hpMax),this.mp>=this.mpMax&&(this.mp=this.mpMax),this.stm>=this.stmMax&&(this.stm=this.stmMax),this.callEvent("heal"))}},{key:"kill",value:function(e){c.get("controls").enabled&&(this.remove(),this.callEvent("kill",{attacker:e}))}},{key:"update",value:function(e){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this,e),this.heal(Date.now()-this.lastDamaged>5e3?.2:0,Date.now()-this.lastUsedStamina>2e3?.2:0,Date.now()-this.lastUsedMagic>2e3?.2:0)}}]),t}(d),f=t.AI=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"AI",i=arguments[1],n=arguments[2],a=arguments[3];o(this,t);var s=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,n,a));return s.target=null,s.seen=!1,s.hp=5,s.hpMax=5,s.mp=1,s.mpMax=1,s.stm=3,s.stmMax=3,s.str=1,s.dex=1,s.int=1,s.cnt=1,s.chr=1,s}return n(t,e),s(t,[{key:"update",value:function(e){var i=this;a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this,e);var r=this.mesh.position,n=!0,o=!1,s=void 0;try{for(var u,p=c.get("entities")[Symbol.iterator]();!(n=(u=p.next()).done);n=!0){var d=u.value;d.id!=this.id&&(r.distanceTo(d.mesh.position)>50||this.data&&this.data.hostility&&this.data.hostility[1].has(d.id)||(this.target&&r.distanceTo(d.mesh.position)<r.distanceTo(this.target.mesh.position)?(this.target=d,this.sounds[0]&&this.hp>0&&c.get("controls").enabled&&this.sounds[0].play(),this.callEvent("newTarget",this.target)):this.target||(this.target=d,this.sounds[0]&&this.hp>0&&c.get("controls").enabled&&this.sounds[0].play(),this.callEvent("newTarget",this.target))))}}catch(e){o=!0,s=e}finally{try{!n&&p.return&&p.return()}finally{if(o)throw s}}this.target&&r.distanceTo(this.target.mesh.position)>50&&(this.target=null);var h=this.spd||7;if(this.addEventListener("damage",function(){i.sounds[2]&&i.hp>0&&c.get("controls").enabled&&!i.sounds[2].isPlaying&&i.hp>0&&i.sounds[2].play()}),this.addEventListener("kill",function(){i.sounds[3]&&i.hp>0&&c.get("controls").enabled&&!i.sounds[3].isPlaying&&i.sounds[3].play()}),this.target){var f=this.target.mesh.position;this.mesh.lookAt(new l.Vector3(f.x,this.mesh.position.y,f.z));var m=0;m=this.data&&this.data.hostility[0].has(this.target.id)?-1:this.data&&this.data.hostility[2].has(this.target.id)?1:this.opts.hostility,this.hostility=m;var y=void 0===this.dex?1:this.dex;0==this.dex&&(this.body.velocity.x=0,this.body.velocity.z=0),m>0&&(y*=-1),0!=m&&r.distanceTo(f)>(m>0?10:5)?(r.x<f.x?this.body.velocity.x+=y:r.x>f.x&&(this.body.velocity.x-=y),r.z<f.z?this.body.velocity.z+=y:r.z>f.z&&(this.body.velocity.z-=y)):c.get("tick")%50==0&&m<0&&(this.attack(this.target),this.sounds[1]&&c.get("controls").enabled&&this.sounds[1].play())}else this.body.velocity.x=0,this.body.velocity.z=0;this.body.velocity.x>h?this.body.velocity.x=h:this.body.velocity.x<-h&&(this.body.velocity.x=-h),this.body.velocity.z>h?this.body.velocity.z=h:this.body.velocity.z<-h&&(this.body.velocity.z=-h)}}]),t}(h);t.Creature=function(e){function t(e,n){o(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,new l.Object3D,new u.Body,n)),s=i(14);if(!s[e])throw new Error("Error: cannot find creature with id of "+e);var p=s[e];a.data=p,a.id=a.data.id,a.inv=p.inv;for(var d in p.stats)a[d]=p.stats[d];return(new l.ObjectLoader).load("/assets/3d/"+p.path+".json",function(e){c.get("cache").json[p.path]=e;var t=new u.Body({mass:5});t.addShape(new u.Sphere(1));var i=void 0;if(i=new u.Vec3(n.pos.x||10,n.pos.y||20,n.pos.z||10),p.meta&&p.meta.spawn){var r=p.meta.spawn;i=6==r.length?new u.Vec3(Math.interval(r[0],r[1]),Math.interval(r[2],r[3]),Math.interval(r[4],r[5])):new u.Vec3(r[0],r[1],r[2])}var o=new l.Raycaster(new l.Vector3(i.x,i.y,i.z),new l.Vector3(0,-1,0)),s=o.intersectObjects(c.get("scene").children,!0);if(s.length>0){var d=s[0].point;t.position.set(d.x,d.y+3,d.z)}else t.position.set(i.x,i.y,i.z);t.linearDamping=.9,e.traverse(function(e){if(p.mesh){var t=!0,i=!1,r=void 0;try{for(var n,o=p.mesh[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var a=n.value;if(a.name.toLowerCase()==e.name.toLowerCase())for(var s in a)e.material[s]=a[s],"color"==s&&(e.material[s]=new l.Color(a[s]))}}catch(e){i=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(i)throw r}}}}),a.mesh=e,c.get("scene").add(a.mesh),a.body=t,c.get("world").add(a.body)}),a.addEventListener("kill",function(t){var r=!0,n=!1,o=void 0;try{for(var s,l=a.inv[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value,p=i(7);if(!p[u.id])throw new Error("Error: cannot find item with id of "+e);var d=Math.round(Math.random()*u.max)+u.min;if(d>u.max&&(d=u.max),d){for(var h=0;h<d;h++)t.attacker.inv.push(p[u.id]);t.attacker.gainXP(5),t.attacker==c.get("player")&&(d>1?Materialize.toast(u.id+" ("+d+") added",1e3):Materialize.toast(u.id+" added",1e3))}}}catch(e){n=!0,o=e}finally{try{!r&&l.return&&l.return()}finally{if(n)throw o}}}),a}return n(t,e),s(t,[{key:"update",value:function(){if(a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this),(!this.data.meta||!this.data.meta.spawn)&&this.mesh.position.distanceTo(c.get("player").mesh.position)>250){var e=new u.Vec3;e.x=Math.interval(c.get("player").mesh.position.x-200,c.get("player").mesh.position.x+200),e.y=20,e.z=Math.interval(c.get("player").mesh.position.x-200,c.get("player").mesh.position.x+200);var i=new l.Raycaster(new l.Vector3(e.x,e.y,e.z),new l.Vector3(0,-1,0)),r=i.intersectObjects(c.get("scene").children,!0);if(r.length>0){var n=r[0].point;this.body.position.set(n.x,n.y+3,n.z)}else this.body.position.set(e.x,e.y,e.z)}}}]),t}(f),t.NPC=function(e){function t(e,n){o(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,new l.Object3D,new u.Body,n)),s=i(15);if(!s[e])throw new Error("Error: cannot find NPC with id of "+e);var p=s[e];a.data=p,a.inv=p.inv;for(var d in p.stats)a[d]=p.stats[d];(new l.ObjectLoader).load("/assets/3d/"+p.path+".json",function(e){e.scale.set(2,2,2);var t=new u.Body({mass:5});t.addShape(new u.Sphere(.75));var i=void 0;if(i=new u.Vec3(n.pos.x||10,n.pos.y||20,n.pos.z||10),p.meta&&p.meta.spawn){var r=p.meta.spawn;i=6==r.length?new u.Vec3(Math.interval(r[0],r[1]),Math.interval(r[2],r[3]),Math.interval(r[4],r[5])):new u.Vec3(r[0],r[1],r[2])}t.position.set(i.x,i.y,i.z),t.linearDamping=.9,a.mesh=e,c.get("scene").add(a.mesh),a.body=t,c.get("world").add(a.body)}),a.addEventListener("newTarget",function(e){a.hasChosenTarget=a.hasChosenTarget||!1,a.hasSpokenInteract=a.hasSpokenInteract||!1,a.hasChosenTarget||(a.target=null),a.sounds[0]=null}),a.addEventListener("interact",function(){var e=0,t=!0,i=!1,r=void 0;try{for(var n,o=c.get("player").inv[Symbol.iterator]();!(t=(n=o.next()).done);t=!0)"gelatin"==n.value.id&&e++}catch(e){i=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(i)throw r}}if(e<5){var s=document.createElement("audio");s.src="/assets/sfx/wicket-request.mp3",s.addEventListener("ended",function(){new Audio("/assets/sfx/wicket-tutorial-inventory.mp3").play()}),s.play()}else a.hasChosenTarget=!0,a.target=c.get("player"),new Audio("/assets/sfx/wicket-thanks.mp3").play()});var h=c.get("events").subscribe("system.pointerlock.enter",function(){var e=document.createElement("audio");e.src="/assets/sfx/wicket-help.mp3",e.addEventListener("ended",function(){var e=document.createElement("audio");e.src="/assets/sfx/wicket-tutorial-look.mp3",e.addEventListener("ended",function(){var e=c.get("events").subscribe("player.look",function(){var t=document.createElement("audio");t.src="/assets/sfx/wicket-success.mp3",t.addEventListener("ended",function(){var t=document.createElement("audio");t.src="/assets/sfx/wicket-tutorial-move.mp3",t.addEventListener("ended",function(){var t=c.get("events").subscribe("player.move",function(){var e=document.createElement("audio");e.src="/assets/sfx/wicket-success.mp3",e.addEventListener("ended",function(){var e=document.createElement("audio");e.src="/assets/sfx/wicket-tutorial-attack.mp3",e.addEventListener("ended",function(){var e=c.get("events").subscribe("system.click",function(){var t=document.createElement("audio");t.src="/assets/sfx/wicket-success.mp3",t.addEventListener("ended",function(){var e=document.createElement("audio");e.src="/assets/sfx/wicket-help-2.mp3",e.addEventListener("ended",function(){new Audio("/assets/sfx/wicket-tutorial-interact.mp3").play()}),e.play()}),t.play(),e.unsubscribe()})}),e.play()}),e.play(),t.unsubscribe()});e.unsubscribe()}),t.play()}),t.play(),e.unsubscribe()})}),e.play()}),e.play(),h.unsubscribe()});return a}return n(t,e),t}(f),t.Player=function(e){function t(){o(this,t);var e=new u.Sphere(1.3),i=new u.Body({mass:5});i.addShape(e),i.addEventListener("collide",function(e){var t=e.contact,r=new u.Vec3(0,1,0),n=new u.Vec3;t.bi.id==i.id?t.ni.negate(n):n.copy(t.ni),n.dot(r)>.5&&i.velocity.y<=-30&&(p.hp+=Math.floor(1.5*i.velocity.y))});var n=new l.Raycaster(new l.Vector3(0,40,0),new l.Vector3(0,-1,0)),a=n.intersectObjects(c.get("scene").children,!0);if(a.length>0){var s=a[0].point;i.position.set(s.x,s.y,s.z)}else i.position.set(200,2,0);var p=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"player",new l.Object3D,i));return p.addEventListener("levelUp",function(){return Materialize.toast("Level up!")}),p.poisons=[],p.inv=window.user.character.inv,p.race=window.user.character.race,p.class=window.user.character.class,p.lvl=window.user.character.lvl,p.xp=window.user.character.xp,p.hp=100,p.hpMax=100,p.stm=100,p.stmMax=100,p.mp=100,p.mpMax=100,p.spd=.5,p.dmg=1,p}return n(t,e),s(t,[{key:"update",value:function(e){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this,e),p("#hp").html(this.hp+"/"+this.hpMax+" hp"),this.body.velocity.x*=.925,this.body.velocity.z*=.925}},{key:"kill",value:function(e,i){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"kill",this).call(this,e,i),alert("U dead son")}}]),t}(h)},function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),o=i(0),a=i(3),s=i(13),l=function(){function e(t,i){r(this,e),a("#gui-title").text(t),a("#gui-content").html(i),this.show(),document.exitPointerLock()}return n(e,[{key:"show",value:function(){a("#gui").fadeIn(400)}},{key:"hide",value:function(){a("#gui").fadeOut(400)}}]),e}();t.default=l;var u=t.Menu=function e(){r(this,e);var t=a("<div>").attr("id","menu");a("<h3>").attr("id","menu-levels").html("Character").click(function(){return new c}).appendTo(t),a("<h3>").attr("id","menu-magic").html("Magic").click(function(){return new d}).appendTo(t),a("<h3>").attr("id","menu-inv").html("Inventory").click(function(){return new p}).appendTo(t),a("<h3>").attr("id","menu-options").html("Options").appendTo(t),a("<div>").attr("id","menu-cross").appendTo(t),new l("Menu",t)},c=t.Character=function e(){r(this,e),new l(window.Grove.username||"Character","<p>TODO</p>")},p=t.Inventory=function e(){r(this,e);var t=o.get("player").inv,i=a("<div>"),n=!0,u=!1,c=void 0;try{for(var p,d=t[Symbol.iterator]();!(n=(p=d.next()).done);n=!0)!function(){var e=p.value;!function(){var t=a("<div>"),r=a("<img>").addClass("inv-item").attr("src",e.path).attr("title",e.name).attr("width",50).data("item",e).appendTo(i);t.html("<b>"+e.name+"</b><br><hr><i>"+e.desc+"</i>");var n=new s(r[0],{position:"bottom",html:t[0]}),o=n.getPopperElement(r[0]);o.style.zIndex=999999999999,o.style.maxWidth="150px"}()}()}catch(e){u=!0,c=e}finally{try{!n&&d.return&&d.return()}finally{if(u)throw c}}i.on("click","img",function(){var e=a(this).data("item");if(a(this).hide(),o.get("player").inv.splice(o.get("player").inv.indexOf(e),1),"poison"==e.type)o.get("player").poisons.push(e),Materialize.toast("Your blade is now poisoned!",700);else if(e.effects)for(var t in a(this).data("item").effects)o.get("player")[t]+=e.effects[t]}),new l("Inventory",i)},d=t.Magic=function e(){r(this,e),new l("Menu","<p>TODO</p>")};t.HUD=function(){function e(){r(this,e),this.canvas=document.getElementById("hud-canvas"),this.canvas.setAttribute("width",.7*window.innerWidth),this.ctx=this.canvas.getContext("2d"),this.centerX=this.canvas.width/2,this.centerY=this.canvas.height/2,this.radius=40,this.radiusSmall=30,o.get("events").subscribe("system.update",this.draw.bind(this))}return n(e,[{key:"draw",value:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(this.centerX-this.radiusSmall-15,this.canvas.height-this.radiusSmall-15,this.radiusSmall,0,2*Math.PI,!1),this.ctx.clip(),this.ctx.fillStyle="#000080",this.ctx.fillRect(this.centerX-2*this.radiusSmall-15,this.canvas.height-15,2*this.radiusSmall,-o.get("player").mp/o.get("player").mpMax*this.radiusSmall*2),this.ctx.restore(),this.ctx.beginPath(),this.ctx.arc(this.centerX-this.radiusSmall-15,this.canvas.height-this.radiusSmall-15,this.radiusSmall,0,2*Math.PI,!1),this.ctx.lineWidth=4,this.ctx.strokeStyle="#000000",this.ctx.stroke(),this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(this.centerX+this.radiusSmall+15,this.canvas.height-this.radiusSmall-15,this.radiusSmall,0,2*Math.PI,!1),this.ctx.clip(),this.ctx.fillStyle="#006400",this.ctx.fillRect(this.centerX+15,this.canvas.height-15,2*this.radiusSmall,-o.get("player").stm/o.get("player").stmMax*this.radiusSmall*2),this.ctx.restore(),this.ctx.beginPath(),this.ctx.arc(this.centerX+this.radiusSmall+15,this.canvas.height-this.radiusSmall-15,this.radiusSmall,0,2*Math.PI,!1),this.ctx.lineWidth=4,this.ctx.strokeStyle="#000000",this.ctx.stroke(),this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(this.centerX,this.canvas.height-this.radius-5,this.radius,0,2*Math.PI,!1),this.ctx.clip(),this.ctx.fillStyle="#cc0000",this.ctx.fillRect(this.centerX-this.radius,this.canvas.height-5,2*this.radius,-o.get("player").hp/o.get("player").hpMax*this.radius*2),this.ctx.restore(),this.ctx.beginPath(),this.ctx.arc(this.centerX,this.canvas.height-this.radius-5,this.radius,0,2*Math.PI,!1),this.ctx.lineWidth=6,this.ctx.strokeStyle="#000000",this.ctx.stroke(),this.ctx.fillStyle="#00ff00",this.ctx.fillRect(0,this.canvas.height-10,o.get("player").xp/o.get("player").xpMax*this.canvas.width,10),this.ctx.fillStyle="black",this.ctx.textAlign="center",this.ctx.fillText((o.get("player").hp>0?Math.floor(o.get("player").hp):0)+" HP",this.centerX,this.canvas.height-this.radius)}}]),e}();window.addEventListener("keypress",function(e){80!=e.keyCode&&112!=e.keyCode||new u}),a(document).keyup(function(e){"escape"==e.key.toLowerCase()&&a("#pause").show()})},,function(e,t){e.exports={gelatin:{name:"Gelatin",id:"gelatin",desc:"Like jello, but not edible.",path:"/assets/icons/gelatin.png",weight:1,value:3,effects:{hp:-1}},gelball:{name:"Ball of Gel",id:"gelball",desc:"Compressed gelatin, has distinctive healing properties.",path:"/assets/icons/slow-blob.png",weight:3,value:3,effects:{hp:5}},hpostionsm:{name:"Small Draught of Health",id:"hpotionsm",desc:"A small healing potion for all your small healing needs.",path:"/assets/icons/health-potion.png",effects:{hp:5}},hpostionmd:{name:"Average Draught of Health/",id:"hpotionmd",desc:"A slightly bigger vial of liquid health, tastes slightly of toenail fungus.",path:"/assets/icons/health-potion.png",effects:{hp:10}},hpostionlg:{name:"Large Draught of Health",id:"hpotionlg",desc:"Capable of healing almost all wounds, the toe fungus taste is undeniable in this potion.",path:"/assets/icons/health-potion.png",effects:{hp:15}},spostionsm:{name:"Small Draught of Stamina",id:"spotionsm",desc:"Restores a small amount of stamina with an invigorating serum and a hint of lemon.",path:"/assets/icons/stamina-potion.png",effects:{stm:5}},spostionmd:{name:"Medium Draught of Stamina",id:"spotionmd",desc:"Restores a moderate amount of stamina with an even more invigorating serum and a dash of... lime?",path:"/assets/icons/stamina-potion.png",effects:{stm:10}},spostionlg:{name:"Large Draught of Stamina",id:"spotionlg",desc:"A very invigorating potion which restores a lot of stamina but has a rather odd taste.",path:"/assets/icons/stamina-potion.png",effects:{stm:15}},mpostionsm:{name:"Small Vial of Magic",id:"mpotionsm",desc:"This potion glows faintly when exposed to light.",path:"/assets/icons/mana-potion.png",effects:{mp:5}},mpostionmd:{name:"Average Vial of Magic",id:"mpotionmd",desc:"'Wow!' -- Man after drinking this",path:"/assets/icons/mana-potion.png",effects:{mp:10}},mpostionlg:{name:"Large Vial of Magic",id:"mpotionlg",desc:"Feel the magic coursing through your veins as you sip on this delux magical vial.",path:"/assets/icons/mana-potion.png",effects:{mp:15}},whpoison:{name:"Weak Health Poison",id:"whpoison",desc:"This poison has no description; simply because it is poisonous.",type:"poison",path:"/assets/icons/health-poison.png",effects:{hp:-5}},wspoison:{name:"Weak Stamina Poison",id:"whpoison",desc:"This poison has no description; simply because it is poisonous.",type:"poison",path:"/assets/icons/health-poison.png",effects:{hp:-5}},hsafgpoison:{name:"Hella Strong As Fuck God Poison",id:"hsafgpoison",desc:"This poison has no description; simply because it is poisonous.",type:"poison",path:"/assets/icons/health-poison.png",effects:{hp:-1e11,mp:-1e11,stm:-1e11}}}},function(e,t,i){"use strict";var r=i(5),n=i(4).NPC;new r.HUD,window.onerror=alert,window.Grove.version="1.3.7",window.Grove.globals=i(0),Math.interval=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},Array.prototype.has=function(e){return this.indexOf(e)>-1},console.log("Starting The Grove v."+window.Grove.version+" pre-alpha");window.wicket=new n("wicket",{pos:{},sounds:["wicket.mp3",null,"wicket-hurt.mp3","wicket-hurt.mp3"]});i(16)(),i(17)(),i(22)(),i(23),i(24),i(5)},,,,,function(e,t,i){"use strict";(function(r){var n,o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(r,s){"object"==a(t)&&void 0!==e?e.exports=s():(n=s,void 0!==(o="function"==typeof n?n.call(t,i,t,e):n)&&(e.exports=o))}(0,function(){function e(e){Se.forEach(function(t){var i=t.popper,r=t.tippyInstance,n=t.settings,o=n.appendTo,a=n.hideOnClick,s=n.trigger;if(o.contains(i)){var l=!0===a||-1!==s.indexOf("focus"),u=!e||i!==e.popper;l&&u&&r.hide(i)}})}function t(e,t){return(Element.prototype.closest||function(e){for(var t=this;t;){if(Pe.call(t,e))return t;t=t.parentElement}}).call(e,t)}function i(e,t){return Array.prototype.find?e.find(t):e.filter(t)[0]}function n(){var r=function(){Te.touch=!0,Te.iOS()&&document.body.classList.add("tippy-touch"),Te.dynamicInputDetection&&window.performance&&document.addEventListener("mousemove",n)},n=function(){var e;return function(){var t=performance.now();20>t-e&&(Te.touch=!1,document.removeEventListener("mousemove",n),!Te.iOS()&&document.body.classList.remove("tippy-touch")),e=t}}();document.addEventListener("click",function(r){if(!(r.target instanceof Element))return e();var n=t(r.target,Ce.TOOLTIPPED_EL),o=t(r.target,Ce.POPPER);if(o){if(i(Se,function(e){return e.popper===o}).settings.interactive)return}if(n){var a=i(Se,function(e){return e.el===n}),s=a.settings,l=s.hideOnClick,u=s.multiple,c=s.trigger;if(!u&&Te.touch||!u&&-1!==c.indexOf("click"))return e(a);if(!0!==l||-1!==c.indexOf("click"))return}t(r.target,Ce.CONTROLLER)||!document.querySelector(Ce.POPPER)||e()}),document.addEventListener("touchstart",r),window.addEventListener("blur",function(){var e=document,t=e.activeElement;t&&t.blur&&Pe.call(t,Ce.TOOLTIPPED_EL)&&t.blur()}),!Te.SUPPORTS_TOUCH&&(0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints)&&document.addEventListener("pointerdown",r)}function o(){return!o.done&&(o.done=!0,Le.appendTo=document.body,n(),!0)}function a(e){window.requestAnimationFrame(function(){setTimeout(e,0)})}function s(e){for(var t=[!1,"webkit"],i=e.charAt(0).toUpperCase()+e.slice(1),r=0;r<t.length;r++){var n=t[r],o=n?""+n+i:e;if(void 0!==window.document.body.style[o])return o}return null}function l(e,t){return Array.prototype.findIndex?e.findIndex(t):e.indexOf(i(e,t))}function u(e){var t=e.getAttribute("title");e.setAttribute("data-original-title",t||"html"),e.removeAttribute("title")}function c(e){var t=e.getBoundingClientRect();return 0<=t.top&&0<=t.left&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}function p(e,t){t?window.getComputedStyle(t)[s("transform")]:window.getComputedStyle(e).opacity}function d(e,t){e.forEach(function(e){e&&t(e.classList)})}function h(e,t){e.forEach(function(e){if(e){var i=Pe.call(e,Ce.CONTENT),r=i?_e(t/1.3):t;e.style[s("transitionDuration")]=r+"ms"}})}function f(e){return"visible"===e.style.visibility}function m(){}function y(e){return e.replace(/-.+/,"")}function v(e){var t,r,n=this,o=i(Se,function(e){return e.el===n}),a=o.popper,l=o.settings.offset,u=y(a.getAttribute("x-placement")),c=_e(a.offsetWidth/2),p=_e(a.offsetHeight/2),d=document.documentElement.offsetWidth||document.body.offsetWidth,h=e.pageX,f=e.pageY;"top"===u?(t=h-c+l,r=f-2.25*p):"left"===u?(t=h-2*c-10,r=f-p+l):"right"===u?(t=h+p,r=f-p+l):"bottom"===u&&(t=h-c+l,r=f+p/1.5),("top"===u||"bottom"===u)&&(h+5+c+l>d&&(t=d-5-2*c),0>h-5-c+l&&(t=5)),a.style[s("transform")]="translate3d("+t+"px, "+r+"px, 0)"}function g(e){return e instanceof Element?[e]:Array.isArray(e)?e:[].slice.call(document.querySelectorAll(e))}function b(e,t,i){if(!t)return i();var r=e.popper.querySelector(Ce.TOOLTIP),n=!1,o=function e(t){t.target!==r||(n=!0,r.removeEventListener("webkitTransitionEnd",e),r.removeEventListener("transitionend",e),i())};r.addEventListener("webkitTransitionEnd",o),r.addEventListener("transitionend",o),clearTimeout(e._transitionendTimeout),e._transitionendTimeout=setTimeout(function(){n||i()},t)}function w(e){return e&&"[object Function]"==={}.toString.call(e)}function x(e,t){if(1!==e.nodeType)return[];var i=window.getComputedStyle(e,null);return t?i[t]:i}function A(e){return"HTML"===e.nodeName?e:e.parentNode||e.host}function E(e){if(!e||-1!==["HTML","BODY","#document"].indexOf(e.nodeName))return window.document.body;var t=x(e),i=t.overflow,r=t.overflowX;return/(auto|scroll)/.test(i+t.overflowY+r)?e:E(A(e))}function O(e){var t=e&&e.offsetParent,i=t&&t.nodeName;return i&&"BODY"!==i&&"HTML"!==i?-1!==["TD","TABLE"].indexOf(t.nodeName)&&"static"===x(t,"position")?O(t):t:window.document.documentElement}function _(e){var t=e.nodeName;return"BODY"!==t&&("HTML"===t||O(e.firstElementChild)===e)}function T(e){return null===e.parentNode?e:T(e.parentNode)}function S(e,t){if(!(e&&e.nodeType&&t&&t.nodeType))return window.document.documentElement;var i=e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING,r=i?e:t,n=i?t:e,o=document.createRange();o.setStart(r,0),o.setEnd(n,0);var a=o.commonAncestorContainer;if(e!==a&&t!==a||r.contains(n))return _(a)?a:O(a);var s=T(e);return s.host?S(s.host,t):S(e,T(t).host)}function C(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"top",i="top"===t?"scrollTop":"scrollLeft",r=e.nodeName;if("BODY"===r||"HTML"===r){var n=window.document.documentElement;return(window.document.scrollingElement||n)[i]}return e[i]}function L(e,t){var i=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=C(t,"top"),n=C(t,"left"),o=i?-1:1;return e.top+=r*o,e.bottom+=r*o,e.left+=n*o,e.right+=n*o,e}function M(e,t){var i="x"===t?"Left":"Top",r="Left"==i?"Right":"Bottom";return+e["border"+i+"Width"].split("px")[0]+ +e["border"+r+"Width"].split("px")[0]}function k(e,t,i,r){return Oe(t["offset"+e],i["client"+e],i["offset"+e],Fe()?i["offset"+e]+r["margin"+("Height"===e?"Top":"Left")]+r["margin"+("Height"===e?"Bottom":"Right")]:0)}function P(){var e=window.document.body,t=window.document.documentElement,i=Fe()&&window.getComputedStyle(t);return{height:k("Height",e,t,i),width:k("Width",e,t,i)}}function R(e){return Ge({},e,{right:e.left+e.width,bottom:e.top+e.height})}function I(e){var t={};if(Fe())try{t=e.getBoundingClientRect();var i=C(e,"top"),r=C(e,"left");t.top+=i,t.left+=r,t.bottom+=i,t.right+=r}catch(e){}else t=e.getBoundingClientRect();var n={left:t.left,top:t.top,width:t.right-t.left,height:t.bottom-t.top},o="HTML"===e.nodeName?P():{},a=o.width||e.clientWidth||n.right-n.left,s=o.height||e.clientHeight||n.bottom-n.top,l=e.offsetWidth-a,u=e.offsetHeight-s;if(l||u){var c=x(e);l-=M(c,"x"),u-=M(c,"y"),n.width-=l,n.height-=u}return R(n)}function z(e,t){var i=Fe(),r="HTML"===t.nodeName,n=I(e),o=I(t),a=E(e),s=x(t),l=+s.borderTopWidth.split("px")[0],u=+s.borderLeftWidth.split("px")[0],c=R({top:n.top-o.top-l,left:n.left-o.left-u,width:n.width,height:n.height});if(c.marginTop=0,c.marginLeft=0,!i&&r){var p=+s.marginTop.split("px")[0],d=+s.marginLeft.split("px")[0];c.top-=l-p,c.bottom-=l-p,c.left-=u-d,c.right-=u-d,c.marginTop=p,c.marginLeft=d}return(i?t.contains(a):t===a&&"BODY"!==a.nodeName)&&(c=L(c,t)),c}function N(e){var t=window.document.documentElement,i=z(e,t),r=Oe(t.clientWidth,window.innerWidth||0),n=Oe(t.clientHeight,window.innerHeight||0),o=C(t),a=C(t,"left");return R({top:o-i.top+i.marginTop,left:a-i.left+i.marginLeft,width:r,height:n})}function D(e){var t=e.nodeName;return"BODY"!==t&&"HTML"!==t&&("fixed"===x(e,"position")||D(A(e)))}function V(e,t,i,r){var n={top:0,left:0},o=S(e,t);if("viewport"===r)n=N(o);else{var a;"scrollParent"===r?(a=E(A(e)),"BODY"===a.nodeName&&(a=window.document.documentElement)):a="window"===r?window.document.documentElement:r;var s=z(a,o);if("HTML"!==a.nodeName||D(o))n=s;else{var l=P(),u=l.height,c=l.width;n.top+=s.top-s.marginTop,n.bottom=u+s.top,n.left+=s.left-s.marginLeft,n.right=c+s.left}}return n.left+=i,n.top+=i,n.right-=i,n.bottom-=i,n}function B(e){return e.width*e.height}function U(e,t,i,r,n){var o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;if(-1===e.indexOf("auto"))return e;var a=V(i,r,o,n),s={top:{width:a.width,height:t.top-a.top},right:{width:a.right-t.right,height:a.height},bottom:{width:a.width,height:a.bottom-t.bottom},left:{width:t.left-a.left,height:a.height}},l=Object.keys(s).map(function(e){return Ge({key:e},s[e],{area:B(s[e])})}).sort(function(e,t){return t.area-e.area}),u=l.filter(function(e){var t=e.width,r=e.height;return t>=i.clientWidth&&r>=i.clientHeight}),c=0<u.length?u[0].key:l[0].key,p=e.split("-")[1];return c+(p?"-"+p:"")}function F(e,t,i){return z(i,S(t,i))}function H(e){var t=window.getComputedStyle(e),i=parseFloat(t.marginTop)+parseFloat(t.marginBottom),r=parseFloat(t.marginLeft)+parseFloat(t.marginRight);return{width:e.offsetWidth+r,height:e.offsetHeight+i}}function j(e){var t={left:"right",right:"left",bottom:"top",top:"bottom"};return e.replace(/left|right|bottom|top/g,function(e){return t[e]})}function W(e,t,i){i=i.split("-")[0];var r=H(e),n={width:r.width,height:r.height},o=-1!==["right","left"].indexOf(i),a=o?"top":"left",s=o?"left":"top",l=o?"height":"width",u=o?"width":"height";return n[a]=t[a]+t[l]/2-r[l]/2,n[s]=i===s?t[s]-r[u]:t[j(s)],n}function G(e,t){return Array.prototype.find?e.find(t):e.filter(t)[0]}function q(e,t,i){if(Array.prototype.findIndex)return e.findIndex(function(e){return e[t]===i});var r=G(e,function(e){return e[t]===i});return e.indexOf(r)}function X(e,t,i){return(void 0===i?e:e.slice(0,q(e,"name",i))).forEach(function(e){e.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var i=e.function||e.fn;e.enabled&&w(i)&&(t.offsets.popper=R(t.offsets.popper),t.offsets.reference=R(t.offsets.reference),t=i(t,e))}),t}function K(){if(!this.state.isDestroyed){var e={instance:this,styles:{},attributes:{},flipped:!1,offsets:{}};e.offsets.reference=F(this.state,this.popper,this.reference),e.placement=U(this.options.placement,e.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),e.originalPlacement=e.placement,e.offsets.popper=W(this.popper,e.offsets.reference,e.placement),e.offsets.popper.position="absolute",e=X(this.modifiers,e),this.state.isCreated?this.options.onUpdate(e):(this.state.isCreated=!0,this.options.onCreate(e))}}function Y(e,t){return e.some(function(e){var i=e.name;return e.enabled&&i===t})}function J(e){for(var t=[!1,"ms","Webkit","Moz","O"],i=e.charAt(0).toUpperCase()+e.slice(1),r=0;r<t.length-1;r++){var n=t[r],o=n?""+n+i:e;if(void 0!==window.document.body.style[o])return o}return null}function Z(){return this.state.isDestroyed=!0,Y(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.left="",this.popper.style.position="",this.popper.style.top="",this.popper.style[J("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function Q(e,t,i,r){var n="BODY"===e.nodeName,o=n?window:e;o.addEventListener(t,i,{passive:!0}),n||Q(E(o.parentNode),t,i,r),r.push(o)}function $(e,t,i,r){i.updateBound=r,window.addEventListener("resize",i.updateBound,{passive:!0});var n=E(e);return Q(n,"scroll",i.updateBound,i.scrollParents),i.scrollElement=n,i.eventsEnabled=!0,i}function ee(){this.state.eventsEnabled||(this.state=$(this.reference,this.options,this.state,this.scheduleUpdate))}function te(e,t){return window.removeEventListener("resize",t.updateBound),t.scrollParents.forEach(function(e){e.removeEventListener("scroll",t.updateBound)}),t.updateBound=null,t.scrollParents=[],t.scrollElement=null,t.eventsEnabled=!1,t}function ie(){this.state.eventsEnabled&&(window.cancelAnimationFrame(this.scheduleUpdate),this.state=te(this.reference,this.state))}function re(e){return""!==e&&!isNaN(parseFloat(e))&&isFinite(e)}function ne(e,t){Object.keys(t).forEach(function(i){var r="";-1!==["width","height","top","right","bottom","left"].indexOf(i)&&re(t[i])&&(r="px"),e.style[i]=t[i]+r})}function oe(e,t){Object.keys(t).forEach(function(i){!1===t[i]?e.removeAttribute(i):e.setAttribute(i,t[i])})}function ae(e,t,i){var r=G(e,function(e){return e.name===t}),n=!!r&&e.some(function(e){return e.name===i&&e.enabled&&e.order<r.order});if(!n){var o="`"+t+"`";console.warn("`"+i+"` modifier is required by "+o+" modifier in order to work, be sure to include it before "+o+"!")}return n}function se(e){return"end"===e?"start":"start"===e?"end":e}function le(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],i=Xe.indexOf(e),r=Xe.slice(i+1).concat(Xe.slice(0,i));return t?r.reverse():r}function ue(e,t,i,r){var n=e.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),o=+n[1],a=n[2];if(!o)return e;if(0===a.indexOf("%")){var s;switch(a){case"%p":s=i;break;case"%":case"%r":default:s=r}return R(s)[t]/100*o}if("vh"===a||"vw"===a){return("vh"===a?Oe(document.documentElement.clientHeight,window.innerHeight||0):Oe(document.documentElement.clientWidth,window.innerWidth||0))/100*o}return o}function ce(e,t,i,r){var n=[0,0],o=-1!==["right","left"].indexOf(r),a=e.split(/(\+|\-)/).map(function(e){return e.trim()}),s=a.indexOf(G(a,function(e){return-1!==e.search(/,|\s/)}));a[s]&&-1===a[s].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var l=/\s*,\s*|\s+/,u=-1===s?[a]:[a.slice(0,s).concat([a[s].split(l)[0]]),[a[s].split(l)[1],a.slice(s+1)]];return u=u.map(function(e,r){var n=(1===r?!o:o)?"height":"width",a=!1;return e.reduce(function(e,t){return""===e[e.length-1]&&-1!==["+","-"].indexOf(t)?(e[e.length-1]=t,a=!0,e):a?(e[e.length-1]+=t,a=!1,e):e.concat(t)},[]).map(function(e){return ue(e,n,t,i)})}),u.forEach(function(e,t){e.forEach(function(i,r){re(i)&&(n[t]+=i*("-"===e[r-1]?-1:1))})}),n}function pe(e){return-(e-Le.distance)+"px"}function de(e){var t=e.el,i=e.popper,r=e.settings,n=r.position,o=r.popperOptions,a=r.offset,s=r.distance,l=(r.flipDuration,i.querySelector(Ce.TOOLTIP)),u=Qe({placement:n},o||{},{modifiers:Qe({},o?o.modifiers:{},{flip:Qe({padding:s+5},o&&o.modifiers?o.modifiers.flip:{}),offset:Qe({offset:a},o&&o.modifiers?o.modifiers.offset:{})}),onUpdate:function(){var e=l.style;e.top="",e.bottom="",e.left="",e.right="",e[y(i.getAttribute("x-placement"))]=pe(s)}});return new Ye(t,i,u)}function he(e){var t=e.el,i=e.popper,r=e.settings,n=r.appendTo,o=r.followCursor,l=r.flipDuration;if(!n.contains(i)){if(n.appendChild(i),!e.popperInstance){if(e.popperInstance=de(e),window.MutationObserver){var u=i.style,c=new MutationObserver(function(){u[s("transitionDuration")]="0ms",e.popperInstance.update(),a(function(){u[s("transitionDuration")]=l+"ms"})});c.observe(i,{childList:!0,subtree:!0,characterData:!0}),e._mutationObserver=c}}else e.popperInstance.update(),(!o||Te.touch)&&e.popperInstance.enableEventListeners();o&&!Te.touch&&(t.addEventListener("mousemove",v),e.popperInstance.disableEventListeners())}}function fe(e){var t=e.popper,i=e.popperInstance,r=e.settings.stickyDuration,n=function(){return t.style[s("transitionDuration")]=r+"ms"},o=function(){return t.style[s("transitionDuration")]=""};a(function e(){i&&i.scheduleUpdate(),n(),f(t)?window.requestAnimationFrame(e):o()})}function me(e,t){var i=Me.reduce(function(i,r){var n=e.getAttribute("data-"+r.toLowerCase())||t[r];return"false"===n&&(n=!1),"true"===n&&(n=!0),isFinite(n)&&!isNaN(parseFloat(n))&&(n=parseFloat(n)),"string"==typeof n&&"["===n.trim().charAt(0)&&(n=JSON.parse(n)),i[r]=n,i},{});return Qe({},t,i)}function ye(e,t,i){var r=i.position,n=i.distance,o=i.arrow,a=i.animateFill,s=i.inertia,l=i.animation,u=i.arrowSize,c=i.size,p=i.theme,d=i.html,h=i.zIndex,f=i.interactive,m=document.createElement("div");m.setAttribute("class","tippy-popper"),m.setAttribute("role","tooltip"),m.setAttribute("aria-hidden","true"),m.setAttribute("id","tippy-tooltip-"+e),m.style.zIndex=h;var v=document.createElement("div");if(v.setAttribute("class","tippy-tooltip tippy-tooltip--"+c+" leave"),v.setAttribute("data-animation",l),p.split(" ").forEach(function(e){v.classList.add(e+"-theme")}),o){var g=document.createElement("div");g.setAttribute("class","arrow-"+u),g.setAttribute("x-arrow",""),v.appendChild(g)}if(a){v.setAttribute("data-animatefill","");var b=document.createElement("div");b.setAttribute("class","leave"),b.setAttribute("x-circle",""),v.appendChild(b)}s&&v.setAttribute("data-inertia",""),f&&v.setAttribute("data-interactive","");var w=document.createElement("div");if(w.setAttribute("class","tippy-tooltip-content"),d){var x;d instanceof Element?(w.appendChild(d),x="#"+d.id||"tippy-html-template"):(w.innerHTML=document.getElementById(d.replace("#","")).innerHTML,x=d),m.classList.add("html-template"),f&&m.setAttribute("tabindex","-1"),v.setAttribute("data-template-id",x)}else w.innerHTML=t;return v.style[y(r)]=pe(n),v.appendChild(w),m.appendChild(v),m}function ve(e,t,i,r){var n=[];return"manual"===e?n:(t.addEventListener(e,i.handleTrigger),n.push({event:e,handler:i.handleTrigger}),"mouseenter"===e&&(Te.SUPPORTS_TOUCH&&r&&(t.addEventListener("touchstart",i.handleTrigger),n.push({event:"touchstart",handler:i.handleTrigger}),t.addEventListener("touchend",i.handleMouseleave),n.push({event:"touchend",handler:i.handleMouseleave})),t.addEventListener("mouseleave",i.handleMouseleave),n.push({event:"mouseleave",handler:i.handleMouseleave})),"focus"===e&&(t.addEventListener("blur",i.handleBlur),n.push({event:"blur",handler:i.handleBlur})),n)}function ge(e,t,i){if(!t.getAttribute("x-placement"))return!0;var r=e.clientX,n=e.clientY,o=i.interactiveBorder,a=i.distance,s=t.getBoundingClientRect(),l=y(t.getAttribute("x-placement")),u=o+a,c={top:s.top-n>o,bottom:n-s.bottom>o,left:s.left-r>o,right:r-s.right>o};return"top"===l?c.top=s.top-n>u:"bottom"===l?c.bottom=n-s.bottom>u:"left"===l?c.left=s.left-r>u:"right"===l&&(c.right=r-s.right>u),c.top||c.bottom||c.left||c.right}function be(e,i,r){var n,o,a=this,s=(r.position,r.delay),l=(r.duration,r.interactive),u=(r.interactiveBorder,r.distance,r.hideOnClick),c=r.trigger,p=r.touchHold,d=(r.touchWait,function(){clearTimeout(n),clearTimeout(o)}),h=function(){if(d(),!f(i)){var e=Array.isArray(s)?s[0]:s;s?n=setTimeout(function(){return a.show(i)},e):a.show(i)}},m=function(e){return a.callbacks.wait?a.callbacks.wait.call(i,h,e):h()},y=function(){d();var e=Array.isArray(s)?s[1]:s;s?o=setTimeout(function(){return a.hide(i)},e):a.hide(i)};return{handleTrigger:function(t){var r="mouseenter"===t.type&&Te.SUPPORTS_TOUCH&&Te.touch;if(!r||!p){"click"===t.type&&f(i)&&"persistent"!==u?y():m(t),r&&Te.iOS()&&e.click&&e.click()}},handleMouseleave:function(n){if(!("mouseleave"===n.type&&Te.SUPPORTS_TOUCH&&Te.touch&&p)){if(l){var o=function n(o){var a=function(){document.body.removeEventListener("mouseleave",y),document.removeEventListener("mousemove",n),y()},s=t(o.target,Ce.TOOLTIPPED_EL),l=t(o.target,Ce.POPPER)===i,u=-1!==c.indexOf("click");return s&&s!==e?a():void(l||s===e||u||ge(o,i,r)&&a())};return document.body.addEventListener("mouseleave",y),void document.addEventListener("mousemove",o)}y()}},handleBlur:function(e){!e.relatedTarget||Te.touch||t(e.relatedTarget,Ce.POPPER)||y()}}}function we(e){var t=this;return e.reduce(function(e,i){var r=$e,n=t.settings.performance?t.settings:me(i,t.settings);n.arrow&&(n.animateFill=!1);var o=n.html,a=n.trigger,s=n.touchHold,l=i.getAttribute("title");if(!l&&!o)return e;i.setAttribute("data-tooltipped",""),i.setAttribute("aria-describedby","tippy-tooltip-"+r),u(i);var c=ye(r,l,n),p=be.call(t,i,c,n),d=[];return a.trim().split(" ").forEach(function(e){return d=d.concat(ve(e,i,p,s))}),e.push({id:r,el:i,popper:c,settings:n,listeners:d,tippyInstance:t}),$e++,e},[])}function xe(e,t){return new et(e,t)}var Ae=Math.min,Ee=Math.floor,Oe=Math.max,_e=Math.round,Te={};"undefined"!=typeof window&&(Te.SUPPORTED="requestAnimationFrame"in window,Te.SUPPORTS_TOUCH="ontouchstart"in window,Te.touch=!1,Te.dynamicInputDetection=!0,Te.iOS=function(){return/iPhone|iPad|iPod/.test(navigator.userAgent)&&!window.MSStream});for(var Se=[],Ce={POPPER:".tippy-popper",TOOLTIP:".tippy-tooltip",CONTENT:".tippy-tooltip-content",CIRCLE:"[x-circle]",ARROW:"[x-arrow]",TOOLTIPPED_EL:"[data-tooltipped]",CONTROLLER:"[data-tippy-controller]"},Le={html:!1,position:"top",animation:"shift",animateFill:!0,arrow:!1,arrowSize:"regular",delay:0,trigger:"mouseenter focus",duration:350,interactive:!1,interactiveBorder:2,theme:"dark",size:"regular",distance:10,offset:0,hideOnClick:!0,multiple:!1,followCursor:!1,inertia:!1,flipDuration:350,sticky:!1,stickyDuration:200,appendTo:null,zIndex:9999,touchHold:!1,performance:!1,dynamicTitle:!1,popperOptions:{}},Me=Te.SUPPORTED&&Object.keys(Le),ke=Element.prototype,Pe=ke.matches||ke.matchesSelector||ke.webkitMatchesSelector||ke.mozMatchesSelector||ke.msMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),i=t.length;0<=--i&&t.item(i)!==this;);return-1<i},Re=["native code","[object MutationObserverConstructor]"],Ie="undefined"!=typeof window,ze=["Edge","Trident","Firefox"],Ne=0,De=0;De<ze.length;De+=1)if(Ie&&0<=navigator.userAgent.indexOf(ze[De])){Ne=1;break}var Ve,Be=Ie&&function(e){return Re.some(function(t){return-1<(e||"").toString().indexOf(t)})}(window.MutationObserver),Ue=Be?function(e){var t=!1,i=0,r=document.createElement("span");return new MutationObserver(function(){e(),t=!1}).observe(r,{attributes:!0}),function(){t||(t=!0,r.setAttribute("x-index",i),++i)}}:function(e){var t=!1;return function(){t||(t=!0,setTimeout(function(){t=!1,e()},Ne))}},Fe=function(){return void 0==Ve&&(Ve=-1!==navigator.appVersion.indexOf("MSIE 10")),Ve},He=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},je=function(){function e(e,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),We=function(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e},Ge=Object.assign||function(e){for(var t,i=1;i<arguments.length;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},qe=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],Xe=qe.slice(3),Ke={FLIP:"flip",CLOCKWISE:"clockwise",COUNTERCLOCKWISE:"counterclockwise"},Ye=function(){function e(t,i){var r=this,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};He(this,e),this.scheduleUpdate=function(){return requestAnimationFrame(r.update)},this.update=Ue(this.update.bind(this)),this.options=Ge({},e.Defaults,n),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=t.jquery?t[0]:t,this.popper=i.jquery?i[0]:i,this.options.modifiers={},Object.keys(Ge({},e.Defaults.modifiers,n.modifiers)).forEach(function(t){r.options.modifiers[t]=Ge({},e.Defaults.modifiers[t]||{},n.modifiers?n.modifiers[t]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(e){return Ge({name:e},r.options.modifiers[e])}).sort(function(e,t){return e.order-t.order}),this.modifiers.forEach(function(e){e.enabled&&w(e.onLoad)&&e.onLoad(r.reference,r.popper,r.options,e,r.state)}),this.update();var o=this.options.eventsEnabled;o&&this.enableEventListeners(),this.state.eventsEnabled=o}return je(e,[{key:"update",value:function(){return K.call(this)}},{key:"destroy",value:function(){return Z.call(this)}},{key:"enableEventListeners",value:function(){return ee.call(this)}},{key:"disableEventListeners",value:function(){return ie.call(this)}}]),e}();Ye.Utils=("undefined"==typeof window?r:window).PopperUtils,Ye.placements=qe,Ye.Defaults={placement:"bottom",eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(e){var t=e.placement,i=t.split("-")[0],r=t.split("-")[1];if(r){var n=e.offsets,o=n.reference,a=n.popper,s=-1!==["bottom","top"].indexOf(i),l=s?"left":"top",u=s?"width":"height",c={start:We({},l,o[l]),end:We({},l,o[l]+o[u]-a[u])};e.offsets.popper=Ge({},a,c[r])}return e}},offset:{order:200,enabled:!0,fn:function(e,t){var i,r=t.offset,n=e.placement,o=e.offsets,a=o.popper,s=o.reference,l=n.split("-")[0];return i=re(+r)?[+r,0]:ce(r,a,s,l),"left"===l?(a.top+=i[0],a.left-=i[1]):"right"===l?(a.top+=i[0],a.left+=i[1]):"top"===l?(a.left+=i[0],a.top-=i[1]):"bottom"===l&&(a.left+=i[0],a.top+=i[1]),e.popper=a,e},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(e,t){var i=t.boundariesElement||O(e.instance.popper);e.instance.reference===i&&(i=O(i));var r=V(e.instance.popper,e.instance.reference,t.padding,i);t.boundaries=r;var n=t.priority,o=e.offsets.popper,a={primary:function(e){var i=o[e];return o[e]<r[e]&&!t.escapeWithReference&&(i=Oe(o[e],r[e])),We({},e,i)},secondary:function(e){var i="right"===e?"left":"top",n=o[i];return o[e]>r[e]&&!t.escapeWithReference&&(n=Ae(o[i],r[e]-("right"===e?o.width:o.height))),We({},i,n)}};return n.forEach(function(e){var t=-1===["left","top"].indexOf(e)?"secondary":"primary";o=Ge({},o,a[t](e))}),e.offsets.popper=o,e},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(e){var t=e.offsets,i=t.popper,r=t.reference,n=e.placement.split("-")[0],o=Ee,a=-1!==["top","bottom"].indexOf(n),s=a?"right":"bottom",l=a?"left":"top",u=a?"width":"height";return i[s]<o(r[l])&&(e.offsets.popper[l]=o(r[l])-i[u]),i[l]>o(r[s])&&(e.offsets.popper[l]=o(r[s])),e}},arrow:{order:500,enabled:!0,fn:function(e,t){if(!ae(e.instance.modifiers,"arrow","keepTogether"))return e;var i=t.element;if("string"==typeof i){if(!(i=e.instance.popper.querySelector(i)))return e}else if(!e.instance.popper.contains(i))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),e;var r=e.placement.split("-")[0],n=e.offsets,o=n.popper,a=n.reference,s=-1!==["left","right"].indexOf(r),l=s?"height":"width",u=s?"top":"left",c=s?"left":"top",p=s?"bottom":"right",d=H(i)[l];a[p]-d<o[u]&&(e.offsets.popper[u]-=o[u]-(a[p]-d)),a[u]+d>o[p]&&(e.offsets.popper[u]+=a[u]+d-o[p]);var h=a[u]+a[l]/2-d/2,f=h-R(e.offsets.popper)[u];return f=Oe(Ae(o[l]-d,f),0),e.arrowElement=i,e.offsets.arrow={},e.offsets.arrow[u]=_e(f),e.offsets.arrow[c]="",e},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(e,t){if(Y(e.instance.modifiers,"inner"))return e;if(e.flipped&&e.placement===e.originalPlacement)return e;var i=V(e.instance.popper,e.instance.reference,t.padding,t.boundariesElement),r=e.placement.split("-")[0],n=j(r),o=e.placement.split("-")[1]||"",a=[];switch(t.behavior){case Ke.FLIP:a=[r,n];break;case Ke.CLOCKWISE:a=le(r);break;case Ke.COUNTERCLOCKWISE:a=le(r,!0);break;default:a=t.behavior}return a.forEach(function(s,l){if(r!==s||a.length===l+1)return e;r=e.placement.split("-")[0],n=j(r);var u=e.offsets.popper,c=e.offsets.reference,p=Ee,d="left"===r&&p(u.right)>p(c.left)||"right"===r&&p(u.left)<p(c.right)||"top"===r&&p(u.bottom)>p(c.top)||"bottom"===r&&p(u.top)<p(c.bottom),h=p(u.left)<p(i.left),f=p(u.right)>p(i.right),m=p(u.top)<p(i.top),y=p(u.bottom)>p(i.bottom),v="left"===r&&h||"right"===r&&f||"top"===r&&m||"bottom"===r&&y,g=-1!==["top","bottom"].indexOf(r),b=!!t.flipVariations&&(g&&"start"===o&&h||g&&"end"===o&&f||!g&&"start"===o&&m||!g&&"end"===o&&y);(d||v||b)&&(e.flipped=!0,(d||v)&&(r=a[l+1]),b&&(o=se(o)),e.placement=r+(o?"-"+o:""),e.offsets.popper=Ge({},e.offsets.popper,W(e.instance.popper,e.offsets.reference,e.placement)),e=X(e.instance.modifiers,e,"flip"))}),e},behavior:"flip",padding:5,boundariesElement:"viewport"},inner:{order:700,enabled:!1,fn:function(e){var t=e.placement,i=t.split("-")[0],r=e.offsets,n=r.popper,o=r.reference,a=-1!==["left","right"].indexOf(i),s=-1===["top","left"].indexOf(i);return n[a?"left":"top"]=o[t]-(s?n[a?"width":"height"]:0),e.placement=j(t),e.offsets.popper=R(n),e}},hide:{order:800,enabled:!0,fn:function(e){if(!ae(e.instance.modifiers,"hide","preventOverflow"))return e;var t=e.offsets.reference,i=G(e.instance.modifiers,function(e){return"preventOverflow"===e.name}).boundaries;if(t.bottom<i.top||t.left>i.right||t.top>i.bottom||t.right<i.left){if(!0===e.hide)return e;e.hide=!0,e.attributes["x-out-of-boundaries"]=""}else{if(!1===e.hide)return e;e.hide=!1,e.attributes["x-out-of-boundaries"]=!1}return e}},computeStyle:{order:850,enabled:!0,fn:function(e,t){var i=t.x,r=t.y,n=e.offsets.popper,o=G(e.instance.modifiers,function(e){return"applyStyle"===e.name}).gpuAcceleration;void 0!==o&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var a,s,l=void 0===o?t.gpuAcceleration:o,u=O(e.instance.popper),c=I(u),p={position:n.position},d={left:Ee(n.left),top:Ee(n.top),bottom:Ee(n.bottom),right:Ee(n.right)},h="bottom"===i?"top":"bottom",f="right"===r?"left":"right",m=J("transform");if(s="bottom"==h?-c.height+d.bottom:d.top,a="right"==f?-c.width+d.right:d.left,l&&m)p[m]="translate3d("+a+"px, "+s+"px, 0)",p[h]=0,p[f]=0,p.willChange="transform";else{var y="bottom"==h?-1:1,v="right"==f?-1:1;p[h]=s*y,p[f]=a*v,p.willChange=h+", "+f}var g={"x-placement":e.placement};return e.attributes=Ge({},g,e.attributes),e.styles=Ge({},p,e.styles),e},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(e){return ne(e.instance.popper,e.styles),oe(e.instance.popper,e.attributes),e.offsets.arrow&&ne(e.arrowElement,e.offsets.arrow),e},onLoad:function(e,t,i,r,n){var o=F(n,t,e),a=U(i.placement,o,t,e,i.modifiers.flip.boundariesElement,i.modifiers.flip.padding);return t.setAttribute("x-placement",a),ne(t,{position:"absolute"}),i},gpuAcceleration:void 0}}};var Je=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Ze=function(){function e(e,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),Qe=Object.assign||function(e){for(var t,i=1;i<arguments.length;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},$e=1,et=function(){function e(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};Je(this,e),Te.SUPPORTED&&(o(),this.state={destroyed:!1},this.selector=t,this.settings=Qe({},Le,i),this.callbacks={wait:i.wait,show:i.onShow||i.show||m,shown:i.onShown||i.shown||m,hide:i.onHide||i.hide||m,hidden:i.onHidden||i.hidden||m},this.store=we.call(this,g(t)),Se.push.apply(Se,this.store))}return Ze(e,[{key:"getPopperElement",value:function(e){try{return i(this.store,function(t){return t.el===e}).popper}catch(e){console.error("[getPopperElement]: Element passed as the argument does not exist in the instance")}}},{key:"getReferenceElement",value:function(e){try{return i(this.store,function(t){return t.popper===e}).el}catch(e){console.error("[getReferenceElement]: Popper passed as the argument does not exist in the instance")}}},{key:"getReferenceData",value:function(e){return i(this.store,function(t){return t.el===e||t.popper===e})}},{key:"show",value:function(e,t){var r=this;if(!this.state.destroyed){this.callbacks.show.call(e);var n=i(this.store,function(t){return t.popper===e}),o=e.querySelector(Ce.TOOLTIP),s=e.querySelector(Ce.CIRCLE),l=e.querySelector(Ce.CONTENT),c=n.el,m=n.settings,y=(m.appendTo,m.sticky),v=m.interactive,g=m.followCursor,w=m.flipDuration,x=m.duration;if(m.dynamicTitle){var A=c.getAttribute("title");A&&(l.innerHTML=A,u(c))}var E=void 0===t?Array.isArray(x)?x[0]:x:t;h([e,o,s],0),he(n),e.style.visibility="visible",e.setAttribute("aria-hidden","false"),a(function(){f(e)&&((!g||Te.touch)&&n.popperInstance.update(),h([o,s],E),(!g||Te.touch)&&h([e],w),s&&(l.style.opacity=1),v&&c.classList.add("active"),y&&fe(n),p(o,s),d([o,s],function(e){e.contains("tippy-notransition")&&e.remove("tippy-notransition"),e.remove("leave"),e.add("enter")}),b(n,E,function(){!f(e)||n._onShownFired||(v&&e.focus(),o.classList.add("tippy-notransition"),n._onShownFired=!0,r.callbacks.shown.call(e))}))})}}},{key:"hide",value:function(e,t){var r=this;if(!this.state.destroyed){this.callbacks.hide.call(e);var n=i(this.store,function(t){return t.popper===e}),o=e.querySelector(Ce.TOOLTIP),a=e.querySelector(Ce.CIRCLE),s=e.querySelector(Ce.CONTENT),l=n.el,u=n.settings,p=u.appendTo,m=(u.sticky,u.interactive),y=(u.followCursor,u.html),g=u.trigger,w=u.duration,x=void 0===t?Array.isArray(w)?w[1]:w:t;n._onShownFired=!1,m&&l.classList.remove("active"),e.style.visibility="hidden",e.setAttribute("aria-hidden","true"),h([o,a,a?s:null],x),a&&(s.style.opacity=0),d([o,a],function(e){e.contains("tippy-tooltip")&&e.remove("tippy-notransition"),e.remove("enter"),e.add("leave")}),y&&-1!==g.indexOf("click")&&c(l)&&l.focus(),b(n,x,function(){f(e)||!p.contains(e)||(l.removeEventListener("mousemove",v),n.popperInstance.disableEventListeners(),p.removeChild(e),r.callbacks.hidden.call(e))})}}},{key:"update",value:function(e){if(!this.state.destroyed){var t=i(this.store,function(t){return t.popper===e}),r=e.querySelector(Ce.CONTENT),n=t.el,o=t.settings.html;return o instanceof Element?void console.warn("Aborted: update() should not be used if `html` is a DOM element"):(r.innerHTML=o?document.getElementById(o.replace("#","")).innerHTML:n.getAttribute("title")||n.getAttribute("data-original-title"),void(!o&&u(n)))}}},{key:"destroy",value:function(e,t){var r=this;if(!this.state.destroyed){var n=i(this.store,function(t){return t.popper===e}),o=n.el,a=n.popperInstance,s=n.listeners,u=n._mutationObserver;f(e)&&this.hide(e,0),s.forEach(function(e){return o.removeEventListener(e.event,e.handler)}),o.setAttribute("title",o.getAttribute("data-original-title")),o.removeAttribute("data-original-title"),o.removeAttribute("data-tooltipped"),o.removeAttribute("aria-describedby"),a&&a.destroy(),u&&u.disconnect(),Se.splice(l(Se,function(t){return t.popper===e}),1),(void 0===t||t)&&(this.store=Se.filter(function(e){return e.tippyInstance===r}))}}},{key:"destroyAll",value:function(){var e=this;if(!this.state.destroyed){var t=this.store.length;this.store.forEach(function(i,r){var n=i.popper;e.destroy(n,r===t-1)}),this.store=null,this.state.destroyed=!0}}}]),e}();return xe.Browser=Te,xe.Defaults=Le,xe.disableDynamicInputDetection=function(){return Te.dynamicInputDetection=!1},xe.enableDynamicInputDetection=function(){return Te.dynamicInputDetection=!0},xe})}).call(t,i(6))},function(e,t){e.exports={slime:{name:"Green Slime",path:"slime/slime",id:"slime",stats:{hp:5,hpMax:5,dmg:5,spd:7},hostility:[["wicket","player"],["slime","slime.red","slime.blue"],[]],inv:[{id:"gelatin",min:1,max:3}],mesh:[{name:"outer",transparent:!0,opacity:.3}]},"slime.red":{name:"Red Slime",path:"slime/slime",id:"slime.red",stats:{hp:10,hpMax:10,dmg:15,spd:7},hostility:[["wicket","player"],["slime","slime.red","slime.blue"],[]],inv:[{id:"gelatin",min:1,max:2}],meta:{spawn:[-500,200,250,300,310,390]},mesh:[{name:"outer",transparent:!0,opacity:.3,color:16711680},{name:"inner",color:16711680}]},"slime.blue":{name:"Blue Slime",path:"slime/slime",id:"slime.blue",stats:{hp:3,hpMax:3,dmg:25,spd:25},hostility:[["wicket","player"],["slime","slime.red","slime.blue"],[]],inv:[{id:"gelball",min:1,max:2}],mesh:[{name:"outer",transparent:!0,opacity:.3,color:255},{name:"inner",color:255}]},gooshroom:{name:"Gooshroom",path:"gooshroom/gooshroom",id:"gooshroom",stats:{hp:25,hpMax:25,dmg:7,dex:0,spd:0},hostility:[["wicket","player","slime","slime.red","slime.blue"],["gooshroom"],[]],inv:[]}}},function(e,t){e.exports={wicket:{name:"Wicket",id:"wicket",path:"wicket/wicket",stats:{hp:300,hpMax:300,spd:20,dmg:15},hostility:[[],["player"],[]],meta:{spawn:[115,32,-30],sounds:["wicket.mp3","silence.wav","wicket-hurt.mp3","silence.wav"]}},bartholomew:{name:"Bartholomew",id:"bartholomew",path:"bartholomew/bartholomew",stats:{hp:100,hpMax:100,spd:12,dmg:7}}}},function(e,t,i){"use strict";var r=i(4),n=i(2),o=(i(1),i(0)),a=o.get("world");e.exports=function(){a.quatNormalizeSkip=0,a.quatNormalizeFast=!1;var e=new n.GSSolver;a.defaultContactMaterial.contactEquationStiffness=1e9,a.defaultContactMaterial.contactEquationRelaxation=4,e.iterations=7,e.tolerance=.1;a.solver=new n.SplitSolver(e),a.gravity.set(0,-20,0),a.broadphase=new n.NaiveBroadphase;var t=new n.Material("slipperyMaterial"),i=new n.ContactMaterial(t,t,0,.3);a.addContactMaterial(i),o.set("player",new r.Player)}},function(e,t,i){"use strict";function r(){a.get("camera").aspect=window.innerWidth/window.innerHeight,a.get("camera").updateProjectionMatrix(),s.setSize(window.innerWidth,window.innerHeight),console.log("Window resized to "+window.innerWidth+", "+window.innerHeight)}var n=i(3),o=i(1),a=(i(2),i(0)),s=a.get("renderer"),l=a.get("scene");e.exports=function(){var e=i(18);o.DefaultLoadingManager.onProgress=function(e,t,i){n("#loaded").text(Math.floor(t/i*100)+"% - v."+window.Grove.version)},o.DefaultLoadingManager.onLoad=function(){n("#instructions").has("h4").length||n("#instructions").html("\n        <h4>"+e[Math.floor(Math.random()*e.length)]+"</h4>\n        <button class='play-btn btn waves-effect waves-light light-green z-depth-3'>Play</button>\n        ").addClass("pntrlk")},o.DefaultLoadingManager.onError=function(e){console.error("Error loading "+e)},l.fog=new o.FogExp2(16777215,.005);var t=i(19).DayNight,u=new t.SunSphere;l.add(u.object3d);var c=new t.Skydom;l.add(c.object3d);var p=new t.SunLight;l.add(p.object3d);var d=1/6*Math.PI*2,h=new o.AmbientLight(2236962);l.add(h),a.get("events").subscribe("system.update",function(e){a.get("controls").enabled&&(d+=1e-5*Math.PI*2,u.update(d),c.update(d),p.update(d))});var f=i(20);a.set("controls",new f(a.get("camera"),a.get("player").body)),l.add(a.get("controls").getObject()),i(21)(a.get("controls")),(new o.ObjectLoader).load("/assets/3d/skjar-isles/skjar-isles.json",function(e){l.add(e),e.castShadow=!0,e.receiveShadow=!0,e.traverse(function(e){e.castShadow=!0,e.receiveShadow=!0,e instanceof o.Mesh&&!/NP/gi.test(e.name)?a.get("load")(e):"NP_Ocean"==e.name&&(e.material.transparent=!0,e.material.opacity=.9)})}),s.shadowMap.enabled=!0,s.shadowMapSoft=!0,s.setSize(window.innerWidth,window.innerHeight),s.setClearColor(l.fog.color,1),document.body.appendChild(s.domElement),window.addEventListener("resize",r,!1)}},function(e,t){e.exports=["While the island's mountains may be fun to climb, keep a look out; they are teeming with some of The Grove's more formiddable creatures.","OOOOO OOOOO OOOOO - Hunter Sokolis, time unknown","Fall damage is a thing now.","A slime's power depends on its color. Green slimes are easy to beat, whereas red slimes are harder.","Please tolerate our crappy graphics","Can you find Hunter's hidden characters?","There will be an update to this game eventually. Keyword is eventually.","Can you find the mysterious ButtBook?","How many slimes can you kill?","Beware the foul-smelling train!","Did you know Wicket is a candle?","<span class='rune'>welcome young traveller</span> - ancient Grove folklore"]},function(e,t,i){"use strict";var r=i(1),n=e.exports=n||{};n.DayNight={},n.DayNight.baseURL="../",n.DayNight.currentPhase=function(e){return Math.sin(e)>Math.sin(0)?"day":Math.sin(e)>Math.sin(-Math.PI/6)?"twilight":"night"},n.DayNight.StarField=function(){var e=r.ImageUtils.loadTexture(n.DayNight.baseURL+"images/galaxy_starfield.png"),t=new r.MeshBasicMaterial({map:e,side:r.BackSide,color:8421504}),i=new r.SphereGeometry(4500,32,32),o=new r.Mesh(i,t);this.object3d=o,this.update=function(e){var i=n.DayNight.currentPhase(e);if("day"===i)o.visible=!1;else if("twilight"===i)o.visible=!1;else{o.visible=!0,o.rotation.y=e/5;var r=Math.abs(Math.sin(e));t.color.setRGB(r,r,r)}}},n.DayNight.SunLight=function(){var e=new r.DirectionalLight(16777215,1);this.object3d=e,this.update=function(t){e.position.x=0,e.position.y=9e4*Math.sin(t),e.position.z=9e4*Math.cos(t);var i=n.DayNight.currentPhase(t);"day"===i?e.color.set("rgb(255,"+(Math.floor(200*Math.sin(t))+55)+","+Math.floor(200*Math.sin(t))+")"):"twilight"===i?(e.intensity=1,e.color.set("rgb("+(255-Math.floor(510*Math.sin(t)*-1))+","+(55-Math.floor(110*Math.sin(t)*-1))+",0)")):e.intensity=1}},n.DayNight.SunSphere=function(){var e=new r.SphereGeometry(20,30,30),t=new r.MeshBasicMaterial({color:16711680}),i=new r.Mesh(e,t);this.object3d=i,this.update=function(e){i.position.x=0,i.position.y=400*Math.sin(e),i.position.z=400*Math.cos(e);var t=n.DayNight.currentPhase(e);"day"===t?i.material.color.set("rgb(255,"+(Math.floor(200*Math.sin(e))+55)+","+(Math.floor(200*Math.sin(e))+5)+")"):"twilight"===t&&i.material.color.set("rgb(255,55,5)")}},n.DayNight.Skydom=function(){var e=new r.SphereGeometry(4500,32,15),t=n.DayNight.Skydom.Shader,i=r.UniformsUtils.clone(t.uniforms),o=new r.ShaderMaterial({vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:i,side:r.BackSide}),a=new r.Mesh(e,o);this.object3d=a,this.update=function(e){var t=n.DayNight.currentPhase(e);"day"===t?(i.topColor.value.set("rgb(0,120,255)"),i.bottomColor.value.set("rgb(255,"+(Math.floor(200*Math.sin(e))+55)+","+Math.floor(200*Math.sin(e))+")")):"twilight"===t?(i.topColor.value.set("rgb(0,"+(120-Math.floor(240*Math.sin(e)*-1))+","+(255-Math.floor(510*Math.sin(e)*-1))+")"),i.bottomColor.value.set("rgb("+(255-Math.floor(510*Math.sin(e)*-1))+","+(55-Math.floor(110*Math.sin(e)*-1))+",0)")):(i.topColor.value.set("black"),i.bottomColor.value.set("black"))}},n.DayNight.Skydom.Shader={uniforms:{topColor:{type:"c",value:(new r.Color).setHSL(.6,1,.75)},bottomColor:{type:"c",value:new r.Color(16777215)},offset:{type:"f",value:400},exponent:{type:"f",value:.6}},vertexShader:["varying vec3 vWorldPosition;","void main() {","\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );","\tvWorldPosition = worldPosition.xyz;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform vec3 topColor;","uniform vec3 bottomColor;","uniform float offset;","uniform float exponent;","varying vec3 vWorldPosition;","void main() {","\tfloat h = normalize( vWorldPosition + offset ).y;","\tgl_FragColor = vec4( mix( bottomColor, topColor, max( pow( h, exponent ), 0.0 ) ), 1.0 );","}"].join("\n")}},function(e,t,i){"use strict";var r=i(1),n=i(2),o=i(0);e.exports=function(e,t){var i=new Audio("/assets/sfx/leaves01.ogg"),a=this,s=new r.Object3D;s.add(e),e.position.y+=1;var l=new r.Object3D;l.position.y=2,l.add(s);var u=new r.Quaternion,c=!1,p=!1,d=!1,h=!1,f=!1,m=!1,y=new n.Vec3,v=new n.Vec3(0,1,0);t.addEventListener("collide",function(e){var i=e.contact;i.bi.id==t.id?i.ni.negate(y):y.copy(i.ni),y.dot(v)>.5&&(f=!0)});var g=t.velocity,b=Math.PI/2,w=function(e){if(!1!==a.enabled){var t=e.movementX||e.mozMovementX||e.webkitMovementX||0,i=e.movementY||e.mozMovementY||e.webkitMovementY||0;l.rotation.y-=.002*t,s.rotation.x-=.002*i,s.rotation.x=Math.max(-b,Math.min(b,s.rotation.x)),o.get("events").publish("player.look",{pitch:s.rotation,yaw:l.rotation})}},x=function(e){switch(e.keyCode){case 38:case 87:c=!0,o.get("events").publish("player.move",{});break;case 37:case 65:d=!0,o.get("events").publish("player.move",{});break;case 40:case 83:p=!0,o.get("events").publish("player.move",{});break;case 39:case 68:h=!0,o.get("events").publish("player.move",{});break;case 32:!0===f&&(g.y=10,o.get("events").publish("player.jump",{})),f=!1;break;case 16:m=!0}},A=function(e){switch(e.keyCode){case 38:case 87:c=!1;break;case 37:case 65:d=!1;break;case 40:case 83:p=!1;break;case 39:case 68:h=!1;break;case 16:m=!1}};document.addEventListener("mousemove",w,!1),document.addEventListener("touchmove",w,!1),document.addEventListener("keydown",x,!1),document.addEventListener("keyup",A,!1),this.enabled=!1,this.getObject=function(){return l},this.getDirection=function(e){e.set(0,0,-1),u.multiplyVector3(e)};var E=new r.Vector3,O=new r.Euler;this.update=function(e){if(!1!==a.enabled){e*=.1,E.set(0,0,0);var r=o.get("player").spd;m&&o.get("player").stm>0&&(r*=2,o.get("player").stm--,o.get("player").lastUsedStamina=Date.now()),c&&(E.z=-r*e),p&&(E.z=r*e),d&&(E.x=-r*e),h&&(E.x=r*e),O.y=l.rotation.y,O.order="XYZ",u.setFromEuler(O),E.applyQuaternion(u),g.x+=E.x,g.z+=E.z,(Math.abs(g.x)>4||Math.abs(g.z)>4)&&f&&(c||p||d||h)?i.play():c||p||d||h||!f||(g.x*=.675,g.z*=.675),l.position.copy(t.position)}}}},function(e,t,i){"use strict";var r=i(3),n=i(0);e.exports=function(e){var t=document.getElementById("blocker"),i=document.getElementById("instructions");if("pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document){var o=document.body,a=function(i){n.get("events").publish("system.pointerlock.enter",{}),document.pointerLockElement===o||document.mozPointerLockElement===o||document.webkitPointerLockElement===o?(e.enabled=!0,t.style.display="none"):e.enabled=!1},s=function(e){i.style.display=""};document.addEventListener("pointerlockchange",a,!1),document.addEventListener("mozpointerlockchange",a,!1),document.addEventListener("webkitpointerlockchange",a,!1),document.addEventListener("pointerlockerror",s,!1),document.addEventListener("mozpointerlockerror",s,!1),document.addEventListener("webkitpointerlockerror",s,!1),setInterval(function(){r(".pntrlk").click(function(e){if(i.style.display="none",o.requestPointerLock=o.requestPointerLock||o.mozRequestPointerLock||o.webkitRequestPointerLock,/Firefox/i.test(navigator.userAgent)){var t=function e(t){document.fullscreenElement!==o&&document.mozFullscreenElement!==o&&document.mozFullScreenElement!==o||(document.removeEventListener("fullscreenchange",e),document.removeEventListener("mozfullscreenchange",e),o.requestPointerLock())};document.addEventListener("fullscreenchange",t,!1),document.addEventListener("mozfullscreenchange",t,!1),o.requestFullscreen=o.requestFullscreen||o.mozRequestFullscreen||o.mozRequestFullScreen||o.webkitRequestFullscreen,o.requestFullscreen()}else o.requestPointerLock()})},500)}else i.innerHTML="Your browser doesn't seem to support Pointer Lock API"}},function(e,t,i){"use strict";var r=i(4),n=i(0),o=i(3),a=i(1);i(2);e.exports=function e(t){requestAnimationFrame(e),n.get("controls").enabled&&n.get("world").step(1/60);var i=!0,s=!1,l=void 0;try{for(var u,c=n.get("entities")[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){u.value.update(t)}}catch(e){s=!0,l=e}finally{try{!i&&c.return&&c.return()}finally{if(s)throw l}}var p=!0,d=!1,h=void 0;try{for(var f,m=n.get("tweens")[Symbol.iterator]();!(p=(f=m.next()).done);p=!0){f.value.update(t)}}catch(e){d=!0,h=e}finally{try{!p&&m.return&&m.return()}finally{if(d)throw h}}if(n.get("entities").length<30){var y="slime";Math.random()<.25?y="slime.red":Math.random()<.05&&(y="slime.blue");new r.Creature(y,{pos:{x:Math.interval(n.get("player").mesh.position.x-200,n.get("player").mesh.position.x+200),y:30,z:Math.interval(n.get("player").mesh.position.z-200,n.get("player").mesh.position.z+200),override:!1},sounds:[null,"slime-attack.wav","slime-hurt.wav","slime-die.wav"]})}n.get("player").body.position.y<-100?n.get("player").body.position.set(0,15,0):n.get("player").body.position.y<-20?(o("#overlay").css("background","blue").css("opacity",.5).show(),n.get("player").stm-=.3,n.get("player").stm<0&&(n.get("player").stm=0,n.get("player").damage(1))):o("#overlay").hide(),n.get("controls").update(Date.now()-n.get("time")),n.get("renderer").render(n.get("scene"),n.get("camera")),n.set("time",Date.now()),n.set("tick",n.get("tick")+1);var v=new a.Raycaster;v.set(n.get("camera").getWorldPosition(),n.get("camera").getWorldDirection());var g=!0,b=!1,w=void 0;try{for(var x,A=n.get("entities")[Symbol.iterator]();!(g=(x=A.next()).done);g=!0){var E=x.value;v.intersectObjects(E.mesh.children,!0).length?(E.data&&o("#label").html(E.data.name+" ("+Math.round(E.hp)+"/"+E.hpMax+")"),o("#crosshair").attr("src","/assets/img/crosshair/crosshair-enemy.png")):n.get("tick")%30==0&&(o("#label").html(""),o("#crosshair").attr("src","/assets/img/crosshair/crosshair.png"))}}catch(e){b=!0,w=e}finally{try{!g&&A.return&&A.return()}finally{if(b)throw w}}n.get("events").publish("system.update",{delta:t})}},function(e,t,i){"use strict";for(var r=i(0),n=r.get("player"),o=i(7),a=0;a<0;a++)n.inv.push({name:"Small Draught of Health",id:"hpotionsm",path:"/assets/icons/health-potion.png",desc:"cuz fuck it",effects:{hp:5}});n.inv.push(o.whpoison)},function(e,t,i){"use strict";function r(e){if(u.get("controls").enabled){var t=new s.Raycaster;if(t.set(u.get("camera").getWorldPosition(),u.get("camera").getWorldDirection()),p&&Date.now()-u.get("player").lastAttacked>800){u.get("events").publish("player.attack",{});var i=new l.Tween(p.rotation).to({x:[-Math.PI/2,0]},800).onStart(function(){m.play()}).start();u.get("tweens").push(i),u.get("player").lastAttacked=Date.now();var r=!0,n=!1,o=void 0;try{for(var a,c=u.get("entities")[Symbol.iterator]();!(r=(a=c.next()).done);r=!0){var d=a.value;if(t.intersectObjects(d.mesh.children,!0).length&&u.get("player").mesh.position.distanceTo(d.mesh.position)<5){d.callEvent("click"),u.get("player").attack(d);for(var h=0;h<u.get("player").poisons.length;h++){var f=u.get("player").poisons[h];console.log(f);for(var y in f.effects)console.log(f.effects[y]),d[y]+=f.effects[y],d.hp<=0&&d.kill(u.get("player"));u.get("player").poisons.splice(h,1)}}}}catch(e){n=!0,o=e}finally{try{!r&&c.return&&c.return()}finally{if(n)throw o}}}}}function n(e){"keydown"==e.type||"mousedown"==e.type&&!f?(u.get("camera").add(d.particleGroup.mesh),d.emitter.particleCount=1e3,h=!0):(u.get("camera").remove(d.particleGroup.mesh),h=!1)}function o(e){var t=new s.Raycaster;t.set(u.get("camera").getWorldPosition(),u.get("camera").getWorldDirection());var i=!0,r=!1,n=void 0;try{for(var o,a=u.get("entities")[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var l=o.value;t.intersectObjects(l.mesh.children,!0).length&&l.callEvent("interact")}}catch(e){r=!0,n=e}finally{try{!i&&a.return&&a.return()}finally{if(r)throw n}}}var a=i(25),s=i(1),l=i(27),u=i(0),c=i(3),p=void 0,d=new a.Fire,h=!1,f=!1,m=new Audio("/assets/sfx/sword.mp3");m.volume=.1,u.get("events").subscribe("system.update",function(){if(d.particleGroup.tick(.015),h&&u.get("player").mp>0){u.get("player").mp-=.5;var e=new s.Raycaster;e.set(u.get("camera").getWorldPosition(),u.get("camera").getWorldDirection());var t=!0,i=!1,r=void 0;try{for(var n,o=u.get("entities")[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var a=n.value;e.intersectObjects(a.mesh.children,!0).length&&u.get("player").mesh.position.distanceTo(a.mesh.position)<10&&a.damage(.2,u.get("player"))}}catch(e){i=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(i)throw r}}u.get("player").lastUsedMagic=Date.now()}else d.emitter.particleCount=0,u.get("camera").remove(d.particleGroup.mesh),h=!1,f=!0,setTimeout(function(){return f=!1},500)}),c(window).on("mousedown mouseup",function(e){u.get("controls").enabled&&(u.get("events").publish("system.click",e),2==e.which||4==e.button?o(e):1==e.which?r(e):3==e.which&&n(e))}),c(window).on("keydown keyup",function(e){u.get("controls").enabled&&(!(69==e.keyCode)||o(e),!(81==e.keyCode)||r(e),!(82==e.keyCode)||n(e))}),(new s.ObjectLoader).load("/assets/3d/sword/sword.json",function(e){u.get("camera").add(e),e.scale.set(.1,.1,.1),e.position.x++,e.position.y-=1.2,e.position.z-=1.25,p=e})},function(e,t,i){"use strict";function r(){var e=new n.Group({texture:{value:o.ImageUtils.loadTexture("/assets/img/glow.png")}}),t=new n.Emitter({maxAge:{value:1.5},position:{value:new o.Vector3(-.7,-.72,-.94),spread:new o.Vector3(0,0,0)},acceleration:{value:new o.Vector3(0,0,0),spread:new o.Vector3(.5,.5,0)},velocity:{value:new o.Vector3(0,0,-5),spread:new o.Vector3(-.5,-.5,.5)},direction:1,color:{value:[new o.Color("purple"),new o.Color("orange"),new o.Color("red"),new o.Color("black")]},size:{value:.3},particleCount:1e3});return e.addEmitter(t),{particleGroup:e,emitter:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.Fire=r;var n=i(26),o=i(1);i(0)},function(e,t,i){"use strict";var r,n,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=i(1),s={distributions:{BOX:1,SPHERE:2,DISC:3},valueOverLifetimeLength:4};r=s,void 0!==(n="function"==typeof r?r.call(t,i,t,e):r)&&(e.exports=n),s.TypedArrayHelper=function(e,t,i,r){this.componentSize=i||1,this.size=t||1,this.TypedArrayConstructor=e||Float32Array,this.array=new e(t*this.componentSize),this.indexOffset=r||0},s.TypedArrayHelper.constructor=s.TypedArrayHelper,s.TypedArrayHelper.prototype.setSize=function(e,t){var i=this.array.length;return t||(e*=this.componentSize),i>e?this.shrink(e):e>i?this.grow(e):void console.info("TypedArray is already of size:",e+".","Will not resize.")},s.TypedArrayHelper.prototype.shrink=function(e){return this.array=this.array.subarray(0,e),this.size=e,this},s.TypedArrayHelper.prototype.grow=function(e){var t=this.array,i=new this.TypedArrayConstructor(e);return i.set(t),this.array=i,this.size=e,this},s.TypedArrayHelper.prototype.splice=function(e,t){e*=this.componentSize,t*=this.componentSize;for(var i=[],r=this.array,n=r.length,o=0;n>o;++o)(e>o||o>=t)&&i.push(r[o]);return this.setFromArray(0,i),this},s.TypedArrayHelper.prototype.setFromArray=function(e,t){var i=t.length,r=e+i;return r>this.array.length?this.grow(r):r<this.array.length&&this.shrink(r),this.array.set(t,this.indexOffset+e),this},s.TypedArrayHelper.prototype.setVec2=function(e,t){return this.setVec2Components(e,t.x,t.y)},s.TypedArrayHelper.prototype.setVec2Components=function(e,t,i){var r=this.array,n=this.indexOffset+e*this.componentSize;return r[n]=t,r[n+1]=i,this},s.TypedArrayHelper.prototype.setVec3=function(e,t){return this.setVec3Components(e,t.x,t.y,t.z)},s.TypedArrayHelper.prototype.setVec3Components=function(e,t,i,r){var n=this.array,o=this.indexOffset+e*this.componentSize;return n[o]=t,n[o+1]=i,n[o+2]=r,this},s.TypedArrayHelper.prototype.setVec4=function(e,t){return this.setVec4Components(e,t.x,t.y,t.z,t.w)},s.TypedArrayHelper.prototype.setVec4Components=function(e,t,i,r,n){var o=this.array,a=this.indexOffset+e*this.componentSize;return o[a]=t,o[a+1]=i,o[a+2]=r,o[a+3]=n,this},s.TypedArrayHelper.prototype.setMat3=function(e,t){return this.setFromArray(this.indexOffset+e*this.componentSize,t.elements)},s.TypedArrayHelper.prototype.setMat4=function(e,t){return this.setFromArray(this.indexOffset+e*this.componentSize,t.elements)},s.TypedArrayHelper.prototype.setColor=function(e,t){return this.setVec3Components(e,t.r,t.g,t.b)},s.TypedArrayHelper.prototype.setNumber=function(e,t){return this.array[this.indexOffset+e*this.componentSize]=t,this},s.TypedArrayHelper.prototype.getValueAtIndex=function(e){return this.array[this.indexOffset+e]},s.TypedArrayHelper.prototype.getComponentValueAtIndex=function(e){return this.array.subarray(this.indexOffset+e*this.componentSize)},s.ShaderAttribute=function(e,t,i){var r=s.ShaderAttribute.typeSizeMap;this.type="string"==typeof e&&r.hasOwnProperty(e)?e:"f",this.componentSize=r[this.type],this.arrayType=i||Float32Array,this.typedArray=null,this.bufferAttribute=null,this.dynamicBuffer=!!t,this.updateMin=0,this.updateMax=0},s.ShaderAttribute.constructor=s.ShaderAttribute,s.ShaderAttribute.typeSizeMap={f:1,v2:2,v3:3,v4:4,c:3,m3:9,m4:16},s.ShaderAttribute.prototype.setUpdateRange=function(e,t){this.updateMin=Math.min(e*this.componentSize,this.updateMin*this.componentSize),this.updateMax=Math.max(t*this.componentSize,this.updateMax*this.componentSize)},s.ShaderAttribute.prototype.flagUpdate=function(){var e=this.bufferAttribute,t=e.updateRange;t.offset=this.updateMin,t.count=Math.min(this.updateMax-this.updateMin+this.componentSize,this.typedArray.array.length),e.needsUpdate=!0},s.ShaderAttribute.prototype.resetUpdateRange=function(){this.updateMin=0,this.updateMax=0},s.ShaderAttribute.prototype.resetDynamic=function(){this.bufferAttribute.dynamic=this.dynamicBuffer},s.ShaderAttribute.prototype.splice=function(e,t){this.typedArray.splice(e,t),this.forceUpdateAll()},s.ShaderAttribute.prototype.forceUpdateAll=function(){this.bufferAttribute.array=this.typedArray.array,this.bufferAttribute.updateRange.offset=0,this.bufferAttribute.updateRange.count=-1,this.bufferAttribute.dynamic=!1,this.bufferAttribute.needsUpdate=!0},s.ShaderAttribute.prototype._ensureTypedArray=function(e){null!==this.typedArray&&this.typedArray.size===e*this.componentSize||(null!==this.typedArray&&this.typedArray.size!==e?this.typedArray.setSize(e):null===this.typedArray&&(this.typedArray=new s.TypedArrayHelper(this.arrayType,e,this.componentSize)))},s.ShaderAttribute.prototype._createBufferAttribute=function(e){return this._ensureTypedArray(e),null!==this.bufferAttribute?(this.bufferAttribute.array=this.typedArray.array,parseFloat(a.REVISION)>=81&&(this.bufferAttribute.count=this.bufferAttribute.array.length/this.bufferAttribute.itemSize),void(this.bufferAttribute.needsUpdate=!0)):(this.bufferAttribute=new a.BufferAttribute(this.typedArray.array,this.componentSize),void(this.bufferAttribute.dynamic=this.dynamicBuffer))},s.ShaderAttribute.prototype.getLength=function(){return null===this.typedArray?0:this.typedArray.array.length},s.shaderChunks={defines:["#define PACKED_COLOR_SIZE 256.0","#define PACKED_COLOR_DIVISOR 255.0"].join("\n"),uniforms:["uniform float deltaTime;","uniform float runTime;","uniform sampler2D texture;","uniform vec4 textureAnimation;","uniform float scale;"].join("\n"),attributes:["attribute vec4 acceleration;","attribute vec3 velocity;","attribute vec4 rotation;","attribute vec3 rotationCenter;","attribute vec4 params;","attribute vec4 size;","attribute vec4 angle;","attribute vec4 color;","attribute vec4 opacity;"].join("\n"),varyings:["varying vec4 vColor;","#ifdef SHOULD_ROTATE_TEXTURE","    varying float vAngle;","#endif","#ifdef SHOULD_CALCULATE_SPRITE","    varying vec4 vSpriteSheet;","#endif"].join("\n"),branchAvoidanceFunctions:["float when_gt(float x, float y) {","    return max(sign(x - y), 0.0);","}","float when_lt(float x, float y) {","    return min( max(1.0 - sign(x - y), 0.0), 1.0 );","}","float when_eq( float x, float y ) {","    return 1.0 - abs( sign( x - y ) );","}","float when_ge(float x, float y) {","  return 1.0 - when_lt(x, y);","}","float when_le(float x, float y) {","  return 1.0 - when_gt(x, y);","}","float and(float a, float b) {","    return a * b;","}","float or(float a, float b) {","    return min(a + b, 1.0);","}"].join("\n"),unpackColor:["vec3 unpackColor( in float hex ) {","   vec3 c = vec3( 0.0 );","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","   float b = mod( hex, PACKED_COLOR_SIZE );","   c.r = r / PACKED_COLOR_DIVISOR;","   c.g = g / PACKED_COLOR_DIVISOR;","   c.b = b / PACKED_COLOR_DIVISOR;","   return c;","}"].join("\n"),unpackRotationAxis:["vec3 unpackRotationAxis( in float hex ) {","   vec3 c = vec3( 0.0 );","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","   float b = mod( hex, PACKED_COLOR_SIZE );","   c.r = r / PACKED_COLOR_DIVISOR;","   c.g = g / PACKED_COLOR_DIVISOR;","   c.b = b / PACKED_COLOR_DIVISOR;","   c *= vec3( 2.0 );","   c -= vec3( 1.0 );","   return c;","}"].join("\n"),floatOverLifetime:["float getFloatOverLifetime( in float positionInTime, in vec4 attr ) {","    highp float value = 0.0;","    float deltaAge = positionInTime * float( VALUE_OVER_LIFETIME_LENGTH - 1 );","    float fIndex = 0.0;","    float shouldApplyValue = 0.0;","    value += attr[ 0 ] * when_eq( deltaAge, 0.0 );","","    for( int i = 0; i < VALUE_OVER_LIFETIME_LENGTH - 1; ++i ) {","       fIndex = float( i );","       shouldApplyValue = and( when_gt( deltaAge, fIndex ), when_le( deltaAge, fIndex + 1.0 ) );","       value += shouldApplyValue * mix( attr[ i ], attr[ i + 1 ], deltaAge - fIndex );","    }","","    return value;","}"].join("\n"),colorOverLifetime:["vec3 getColorOverLifetime( in float positionInTime, in vec3 color1, in vec3 color2, in vec3 color3, in vec3 color4 ) {","    vec3 value = vec3( 0.0 );","    value.x = getFloatOverLifetime( positionInTime, vec4( color1.x, color2.x, color3.x, color4.x ) );","    value.y = getFloatOverLifetime( positionInTime, vec4( color1.y, color2.y, color3.y, color4.y ) );","    value.z = getFloatOverLifetime( positionInTime, vec4( color1.z, color2.z, color3.z, color4.z ) );","    return value;","}"].join("\n"),paramFetchingFunctions:["float getAlive() {","   return params.x;","}","float getAge() {","   return params.y;","}","float getMaxAge() {","   return params.z;","}","float getWiggle() {","   return params.w;","}"].join("\n"),forceFetchingFunctions:["vec4 getPosition( in float age ) {","   return modelViewMatrix * vec4( position, 1.0 );","}","vec3 getVelocity( in float age ) {","   return velocity * age;","}","vec3 getAcceleration( in float age ) {","   return acceleration.xyz * age;","}"].join("\n"),rotationFunctions:["#ifdef SHOULD_ROTATE_PARTICLES","   mat4 getRotationMatrix( in vec3 axis, in float angle) {","       axis = normalize(axis);","       float s = sin(angle);","       float c = cos(angle);","       float oc = 1.0 - c;","","       return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,","                   oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,","                   oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,","                   0.0,                                0.0,                                0.0,                                1.0);","   }","","   vec3 getRotation( in vec3 pos, in float positionInTime ) {","      if( rotation.y == 0.0 ) {","           return pos;","      }","","      vec3 axis = unpackRotationAxis( rotation.x );","      vec3 center = rotationCenter;","      vec3 translated;","      mat4 rotationMatrix;","      float angle = 0.0;","      angle += when_eq( rotation.z, 0.0 ) * rotation.y;","      angle += when_gt( rotation.z, 0.0 ) * mix( 0.0, rotation.y, positionInTime );","      translated = rotationCenter - pos;","      rotationMatrix = getRotationMatrix( axis, angle );","      return center - vec3( rotationMatrix * vec4( translated, 0.0 ) );","   }","#endif"].join("\n"),rotateTexture:["    vec2 vUv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );","","    #ifdef SHOULD_ROTATE_TEXTURE","       float x = gl_PointCoord.x - 0.5;","       float y = 1.0 - gl_PointCoord.y - 0.5;","       float c = cos( -vAngle );","       float s = sin( -vAngle );","       vUv = vec2( c * x + s * y + 0.5, c * y - s * x + 0.5 );","    #endif","","    #ifdef SHOULD_CALCULATE_SPRITE","        float framesX = vSpriteSheet.x;","        float framesY = vSpriteSheet.y;","        float columnNorm = vSpriteSheet.z;","        float rowNorm = vSpriteSheet.w;","        vUv.x = gl_PointCoord.x * framesX + columnNorm;","        vUv.y = 1.0 - (gl_PointCoord.y * framesY + rowNorm);","    #endif","","    vec4 rotatedTexture = texture2D( texture, vUv );"].join("\n")},s.shaders={vertex:[s.shaderChunks.defines,s.shaderChunks.uniforms,s.shaderChunks.attributes,s.shaderChunks.varyings,a.ShaderChunk.common,a.ShaderChunk.logdepthbuf_pars_vertex,a.ShaderChunk.fog_pars_vertex,s.shaderChunks.branchAvoidanceFunctions,s.shaderChunks.unpackColor,s.shaderChunks.unpackRotationAxis,s.shaderChunks.floatOverLifetime,s.shaderChunks.colorOverLifetime,s.shaderChunks.paramFetchingFunctions,s.shaderChunks.forceFetchingFunctions,s.shaderChunks.rotationFunctions,"void main() {","    highp float age = getAge();","    highp float alive = getAlive();","    highp float maxAge = getMaxAge();","    highp float positionInTime = (age / maxAge);","    highp float isAlive = when_gt( alive, 0.0 );","    #ifdef SHOULD_WIGGLE_PARTICLES","        float wiggleAmount = positionInTime * getWiggle();","        float wiggleSin = isAlive * sin( wiggleAmount );","        float wiggleCos = isAlive * cos( wiggleAmount );","    #endif","    vec3 vel = getVelocity( age );","    vec3 accel = getAcceleration( age );","    vec3 force = vec3( 0.0 );","    vec3 pos = vec3( position );","    float drag = 1.0 - (positionInTime * 0.5) * acceleration.w;","    force += vel;","    force *= drag;","    force += accel * age;","    pos += force;","    #ifdef SHOULD_WIGGLE_PARTICLES","        pos.x += wiggleSin;","        pos.y += wiggleCos;","        pos.z += wiggleSin;","    #endif","    #ifdef SHOULD_ROTATE_PARTICLES","        pos = getRotation( pos, positionInTime );","    #endif","    vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );","    highp float pointSize = getFloatOverLifetime( positionInTime, size ) * isAlive;","    #ifdef HAS_PERSPECTIVE","        float perspective = scale / length( mvPosition.xyz );","    #else","        float perspective = 1.0;","    #endif","    float pointSizePerspective = pointSize * perspective;","    #ifdef COLORIZE","       vec3 c = isAlive * getColorOverLifetime(","           positionInTime,","           unpackColor( color.x ),","           unpackColor( color.y ),","           unpackColor( color.z ),","           unpackColor( color.w )","       );","    #else","       vec3 c = vec3(1.0);","    #endif","    float o = isAlive * getFloatOverLifetime( positionInTime, opacity );","    vColor = vec4( c, o );","    #ifdef SHOULD_ROTATE_TEXTURE","        vAngle = isAlive * getFloatOverLifetime( positionInTime, angle );","    #endif","    #ifdef SHOULD_CALCULATE_SPRITE","        float framesX = textureAnimation.x;","        float framesY = textureAnimation.y;","        float loopCount = textureAnimation.w;","        float totalFrames = textureAnimation.z;","        float frameNumber = mod( (positionInTime * loopCount) * totalFrames, totalFrames );","        float column = floor(mod( frameNumber, framesX ));","        float row = floor( (frameNumber - column) / framesX );","        float columnNorm = column / framesX;","        float rowNorm = row / framesY;","        vSpriteSheet.x = 1.0 / framesX;","        vSpriteSheet.y = 1.0 / framesY;","        vSpriteSheet.z = columnNorm;","        vSpriteSheet.w = rowNorm;","    #endif","    gl_PointSize = pointSizePerspective;","    gl_Position = projectionMatrix * mvPosition;",a.ShaderChunk.logdepthbuf_vertex,a.ShaderChunk.fog_vertex,"}"].join("\n"),fragment:[s.shaderChunks.uniforms,a.ShaderChunk.common,a.ShaderChunk.fog_pars_fragment,a.ShaderChunk.logdepthbuf_pars_fragment,s.shaderChunks.varyings,s.shaderChunks.branchAvoidanceFunctions,"void main() {","    vec3 outgoingLight = vColor.xyz;","    ","    #ifdef ALPHATEST","       if ( vColor.w < float(ALPHATEST) ) discard;","    #endif",s.shaderChunks.rotateTexture,a.ShaderChunk.logdepthbuf_fragment,"    outgoingLight = vColor.xyz * rotatedTexture.xyz;","    gl_FragColor = vec4( outgoingLight.xyz, rotatedTexture.w * vColor.w );",a.ShaderChunk.fog_fragment,"}"].join("\n")},s.utils={types:{BOOLEAN:"boolean",STRING:"string",NUMBER:"number",OBJECT:"object"},ensureTypedArg:function(e,t,i){return(void 0===e?"undefined":o(e))===t?e:i},ensureArrayTypedArg:function(e,t,i){if(Array.isArray(e)){for(var r=e.length-1;r>=0;--r)if(o(e[r])!==t)return i;return e}return this.ensureTypedArg(e,t,i)},ensureInstanceOf:function(e,t,i){return void 0!==t&&e instanceof t?e:i},ensureArrayInstanceOf:function(e,t,i){if(Array.isArray(e)){for(var r=e.length-1;r>=0;--r)if(void 0!==t&&e[r]instanceof t==0)return i;return e}return this.ensureInstanceOf(e,t,i)},ensureValueOverLifetimeCompliance:function(e,t,i){t=t||3,i=i||3,!1===Array.isArray(e._value)&&(e._value=[e._value]),!1===Array.isArray(e._spread)&&(e._spread=[e._spread]);var r=this.clamp(e._value.length,t,i),n=this.clamp(e._spread.length,t,i),o=Math.max(r,n);e._value.length!==o&&(e._value=this.interpolateArray(e._value,o)),e._spread.length!==o&&(e._spread=this.interpolateArray(e._spread,o))},interpolateArray:function(e,t){for(var i=e.length,r=["function"==typeof e[0].clone?e[0].clone():e[0]],n=(i-1)/(t-1),o=1;t-1>o;++o){var a=o*n,s=Math.floor(a),l=Math.ceil(a),u=a-s;r[o]=this.lerpTypeAgnostic(e[s],e[l],u)}return r.push("function"==typeof e[i-1].clone?e[i-1].clone():e[i-1]),r},clamp:function(e,t,i){return Math.max(t,Math.min(e,i))},zeroToEpsilon:function(e,t){var i=1e-5,r=e;return r=t?Math.random()*i*10:i,0>e&&e>-i&&(r=-r),r},lerpTypeAgnostic:function(e,t,i){var r,n=this.types;return(void 0===e?"undefined":o(e))===n.NUMBER&&(void 0===t?"undefined":o(t))===n.NUMBER?e+(t-e)*i:e instanceof a.Vector2&&t instanceof a.Vector2?(r=e.clone(),r.x=this.lerp(e.x,t.x,i),r.y=this.lerp(e.y,t.y,i),r):e instanceof a.Vector3&&t instanceof a.Vector3?(r=e.clone(),r.x=this.lerp(e.x,t.x,i),r.y=this.lerp(e.y,t.y,i),r.z=this.lerp(e.z,t.z,i),r):e instanceof a.Vector4&&t instanceof a.Vector4?(r=e.clone(),r.x=this.lerp(e.x,t.x,i),r.y=this.lerp(e.y,t.y,i),r.z=this.lerp(e.z,t.z,i),r.w=this.lerp(e.w,t.w,i),r):e instanceof a.Color&&t instanceof a.Color?(r=e.clone(),r.r=this.lerp(e.r,t.r,i),r.g=this.lerp(e.g,t.g,i),r.b=this.lerp(e.b,t.b,i),r):void console.warn("Invalid argument types, or argument types do not match:",e,t)},lerp:function(e,t,i){return e+(t-e)*i},roundToNearestMultiple:function(e,t){var i=0;return 0===t?e:(i=Math.abs(e)%t,0===i?e:0>e?-(Math.abs(e)-i):e+t-i)},arrayValuesAreEqual:function(e){for(var t=0;t<e.length-1;++t)if(e[t]!==e[t+1])return!1;return!0},randomFloat:function(e,t){return e+t*(Math.random()-.5)},randomVector3:function(e,t,i,r,n){var o=i.x+(Math.random()*r.x-.5*r.x),a=i.y+(Math.random()*r.y-.5*r.y),s=i.z+(Math.random()*r.z-.5*r.z);n&&(o=.5*-n.x+this.roundToNearestMultiple(o,n.x),a=.5*-n.y+this.roundToNearestMultiple(a,n.y),s=.5*-n.z+this.roundToNearestMultiple(s,n.z)),e.typedArray.setVec3Components(t,o,a,s)},randomColor:function(e,t,i,r){var n=i.r+Math.random()*r.x,o=i.g+Math.random()*r.y,a=i.b+Math.random()*r.z;n=this.clamp(n,0,1),o=this.clamp(o,0,1),a=this.clamp(a,0,1),e.typedArray.setVec3Components(t,n,o,a)},randomColorAsHex:function(){var e=new a.Color;return function(t,i,r,n){for(var o=r.length,a=[],s=0;o>s;++s){var l=n[s];e.copy(r[s]),e.r+=Math.random()*l.x-.5*l.x,e.g+=Math.random()*l.y-.5*l.y,e.b+=Math.random()*l.z-.5*l.z,e.r=this.clamp(e.r,0,1),e.g=this.clamp(e.g,0,1),e.b=this.clamp(e.b,0,1),a.push(e.getHex())}t.typedArray.setVec4Components(i,a[0],a[1],a[2],a[3])}}(),randomVector3OnSphere:function(e,t,i,r,n,o,a,s){var l=2*Math.random()-1,u=6.2832*Math.random(),c=Math.sqrt(1-l*l),p=this.randomFloat(r,n),d=0,h=0,f=0;a&&(p=Math.round(p/a)*a),d=c*Math.cos(u)*p,h=c*Math.sin(u)*p,f=l*p,d*=o.x,h*=o.y,f*=o.z,d+=i.x,h+=i.y,f+=i.z,e.typedArray.setVec3Components(t,d,h,f)},seededRandom:function(e){var t=1e4*Math.sin(e);return t-(0|t)},randomVector3OnDisc:function(e,t,i,r,n,o,a){var s=6.2832*Math.random(),l=Math.abs(this.randomFloat(r,n)),u=0,c=0,p=0;a&&(l=Math.round(l/a)*a),u=Math.cos(s)*l,c=Math.sin(s)*l,u*=o.x,c*=o.y,u+=i.x,c+=i.y,p+=i.z,e.typedArray.setVec3Components(t,u,c,p)},randomDirectionVector3OnSphere:function(){var e=new a.Vector3;return function(t,i,r,n,o,a,s,l){e.copy(a),e.x-=r,e.y-=n,e.z-=o,e.normalize().multiplyScalar(-this.randomFloat(s,l)),t.typedArray.setVec3Components(i,e.x,e.y,e.z)}}(),randomDirectionVector3OnDisc:function(){var e=new a.Vector3;return function(t,i,r,n,o,a,s,l){e.copy(a),e.x-=r,e.y-=n,e.z-=o,e.normalize().multiplyScalar(-this.randomFloat(s,l)),t.typedArray.setVec3Components(i,e.x,e.y,0)}}(),getPackedRotationAxis:function(){var e=new a.Vector3,t=new a.Vector3,i=new a.Color,r=new a.Vector3(1,1,1);return function(n,o){return e.copy(n).normalize(),t.copy(o).normalize(),e.x+=.5*-o.x+Math.random()*o.x,e.y+=.5*-o.y+Math.random()*o.y,e.z+=.5*-o.z+Math.random()*o.z,e.normalize().add(r).multiplyScalar(.5),i.setRGB(e.x,e.y,e.z),i.getHex()}}()},s.Group=function(e){var t=s.utils,i=t.types;e=t.ensureTypedArg(e,i.OBJECT,{}),e.texture=t.ensureTypedArg(e.texture,i.OBJECT,{}),this.uuid=a.Math.generateUUID(),this.fixedTimeStep=t.ensureTypedArg(e.fixedTimeStep,i.NUMBER,.016),this.texture=t.ensureInstanceOf(e.texture.value,a.Texture,null),this.textureFrames=t.ensureInstanceOf(e.texture.frames,a.Vector2,new a.Vector2(1,1)),this.textureFrameCount=t.ensureTypedArg(e.texture.frameCount,i.NUMBER,this.textureFrames.x*this.textureFrames.y),this.textureLoop=t.ensureTypedArg(e.texture.loop,i.NUMBER,1),this.textureFrames.max(new a.Vector2(1,1)),this.hasPerspective=t.ensureTypedArg(e.hasPerspective,i.BOOLEAN,!0),this.colorize=t.ensureTypedArg(e.colorize,i.BOOLEAN,!0),this.maxParticleCount=t.ensureTypedArg(e.maxParticleCount,i.NUMBER,null),this.blending=t.ensureTypedArg(e.blending,i.NUMBER,a.AdditiveBlending),this.transparent=t.ensureTypedArg(e.transparent,i.BOOLEAN,!0),this.alphaTest=parseFloat(t.ensureTypedArg(e.alphaTest,i.NUMBER,0)),this.depthWrite=t.ensureTypedArg(e.depthWrite,i.BOOLEAN,!1),this.depthTest=t.ensureTypedArg(e.depthTest,i.BOOLEAN,!0),this.fog=t.ensureTypedArg(e.fog,i.BOOLEAN,!0),this.scale=t.ensureTypedArg(e.scale,i.NUMBER,300),this.emitters=[],this.emitterIDs=[],this._pool=[],this._poolCreationSettings=null,this._createNewWhenPoolEmpty=0,this._attributesNeedRefresh=!1,this._attributesNeedDynamicReset=!1,this.particleCount=0,this.uniforms={texture:{type:"t",value:this.texture},textureAnimation:{type:"v4",value:new a.Vector4(this.textureFrames.x,this.textureFrames.y,this.textureFrameCount,Math.max(Math.abs(this.textureLoop),1))},fogColor:{type:"c",value:null},fogNear:{type:"f",value:10},fogFar:{type:"f",value:200},fogDensity:{type:"f",value:.5},deltaTime:{type:"f",value:0},runTime:{type:"f",value:0},scale:{type:"f",value:this.scale}},this.defines={HAS_PERSPECTIVE:this.hasPerspective,COLORIZE:this.colorize,VALUE_OVER_LIFETIME_LENGTH:s.valueOverLifetimeLength,SHOULD_ROTATE_TEXTURE:!1,SHOULD_ROTATE_PARTICLES:!1,SHOULD_WIGGLE_PARTICLES:!1,SHOULD_CALCULATE_SPRITE:this.textureFrames.x>1||this.textureFrames.y>1},this.attributes={position:new s.ShaderAttribute("v3",!0),acceleration:new s.ShaderAttribute("v4",!0),velocity:new s.ShaderAttribute("v3",!0),rotation:new s.ShaderAttribute("v4",!0),rotationCenter:new s.ShaderAttribute("v3",!0),params:new s.ShaderAttribute("v4",!0),size:new s.ShaderAttribute("v4",!0),angle:new s.ShaderAttribute("v4",!0),color:new s.ShaderAttribute("v4",!0),opacity:new s.ShaderAttribute("v4",!0)},this.attributeKeys=Object.keys(this.attributes),this.attributeCount=this.attributeKeys.length,this.material=new a.ShaderMaterial({uniforms:this.uniforms,vertexShader:s.shaders.vertex,fragmentShader:s.shaders.fragment,blending:this.blending,transparent:this.transparent,alphaTest:this.alphaTest,depthWrite:this.depthWrite,depthTest:this.depthTest,defines:this.defines,fog:this.fog}),this.geometry=new a.BufferGeometry,this.mesh=new a.Points(this.geometry,this.material),null===this.maxParticleCount&&console.warn("SPE.Group: No maxParticleCount specified. Adding emitters after rendering will probably cause errors.")},s.Group.constructor=s.Group,s.Group.prototype._updateDefines=function(){var e,t=this.emitters,i=t.length-1,r=this.defines;for(i;i>=0;--i)e=t[i],r.SHOULD_CALCULATE_SPRITE||(r.SHOULD_ROTATE_TEXTURE=r.SHOULD_ROTATE_TEXTURE||!!Math.max(Math.max.apply(null,e.angle.value),Math.max.apply(null,e.angle.spread))),r.SHOULD_ROTATE_PARTICLES=r.SHOULD_ROTATE_PARTICLES||!!Math.max(e.rotation.angle,e.rotation.angleSpread),r.SHOULD_WIGGLE_PARTICLES=r.SHOULD_WIGGLE_PARTICLES||!!Math.max(e.wiggle.value,e.wiggle.spread);this.material.needsUpdate=!0},s.Group.prototype._applyAttributesToGeometry=function(){var e,t,i=this.attributes,r=this.geometry,n=r.attributes;for(var o in i)i.hasOwnProperty(o)&&(e=i[o],t=n[o],t?t.array=e.typedArray.array:r.addAttribute(o,e.bufferAttribute),e.bufferAttribute.needsUpdate=!0);this.geometry.setDrawRange(0,this.particleCount)},s.Group.prototype.addEmitter=function(e){if(e instanceof s.Emitter==0)return void console.error("`emitter` argument must be instance of SPE.Emitter. Was provided with:",e);if(this.emitterIDs.indexOf(e.uuid)>-1)return void console.error("Emitter already exists in this group. Will not add again.");if(null!==e.group)return void console.error("Emitter already belongs to another group. Will not add to requested group.");var t=this.attributes,i=this.particleCount,r=i+e.particleCount;this.particleCount=r,null!==this.maxParticleCount&&this.particleCount>this.maxParticleCount&&console.warn("SPE.Group: maxParticleCount exceeded. Requesting",this.particleCount,"particles, can support only",this.maxParticleCount),e._calculatePPSValue(e.maxAge._value+e.maxAge._spread),e._setBufferUpdateRanges(this.attributeKeys),e._setAttributeOffset(i),e.group=this,e.attributes=this.attributes;for(var n in t)t.hasOwnProperty(n)&&t[n]._createBufferAttribute(null!==this.maxParticleCount?this.maxParticleCount:this.particleCount);for(var o=i;r>o;++o)e._assignPositionValue(o),e._assignForceValue(o,"velocity"),e._assignForceValue(o,"acceleration"),e._assignAbsLifetimeValue(o,"opacity"),e._assignAbsLifetimeValue(o,"size"),e._assignAngleValue(o),e._assignRotationValue(o),e._assignParamsValue(o),e._assignColorValue(o);return this._applyAttributesToGeometry(),this.emitters.push(e),this.emitterIDs.push(e.uuid),this._updateDefines(e),this.material.needsUpdate=!0,this.geometry.needsUpdate=!0,this._attributesNeedRefresh=!0,this},s.Group.prototype.removeEmitter=function(e){var t=this.emitterIDs.indexOf(e.uuid);if(e instanceof s.Emitter==0)return void console.error("`emitter` argument must be instance of SPE.Emitter. Was provided with:",e);if(-1===t)return void console.error("Emitter does not exist in this group. Will not remove.");for(var i=e.attributeOffset,r=i+e.particleCount,n=this.attributes.params.typedArray,o=i;r>o;++o)n.array[4*o]=0,n.array[4*o+1]=0;this.emitters.splice(t,1),this.emitterIDs.splice(t,1);for(var a in this.attributes)this.attributes.hasOwnProperty(a)&&this.attributes[a].splice(i,r);this.particleCount-=e.particleCount,e._onRemove(),this._attributesNeedRefresh=!0},s.Group.prototype.getFromPool=function(){var e=this._pool,t=this._createNewWhenPoolEmpty;if(e.length)return e.pop();if(t){var i=new s.Emitter(this._poolCreationSettings);return this.addEmitter(i),i}return null},s.Group.prototype.releaseIntoPool=function(e){return e instanceof s.Emitter==0?void console.error("Argument is not instanceof SPE.Emitter:",e):(e.reset(),this._pool.unshift(e),this)},s.Group.prototype.getPool=function(){return this._pool},s.Group.prototype.addPool=function(e,t,i){var r;this._poolCreationSettings=t,this._createNewWhenPoolEmpty=!!i;for(var n=0;e>n;++n)r=Array.isArray(t)?new s.Emitter(t[n]):new s.Emitter(t),this.addEmitter(r),this.releaseIntoPool(r);return this},s.Group.prototype._triggerSingleEmitter=function(e){var t=this.getFromPool(),i=this;return null===t?void console.log("SPE.Group pool ran out."):(e instanceof a.Vector3&&(t.position.value.copy(e),t.position.value=t.position.value),t.enable(),setTimeout(function(){t.disable(),i.releaseIntoPool(t)},1e3*Math.max(t.duration,t.maxAge.value+t.maxAge.spread)),this)},s.Group.prototype.triggerPoolEmitter=function(e,t){if("number"==typeof e&&e>1)for(var i=0;e>i;++i)this._triggerSingleEmitter(t);else this._triggerSingleEmitter(t);return this},s.Group.prototype._updateUniforms=function(e){this.uniforms.runTime.value+=e,this.uniforms.deltaTime.value=e},s.Group.prototype._resetBufferRanges=function(){var e=this.attributeKeys,t=this.attributeCount-1,i=this.attributes;for(t;t>=0;--t)i[e[t]].resetUpdateRange()},s.Group.prototype._updateBuffers=function(e){var t,i,r,n=this.attributeKeys,o=this.attributeCount-1,a=this.attributes,s=e.bufferUpdateRanges;for(o;o>=0;--o)t=n[o],i=s[t],r=a[t],r.setUpdateRange(i.min,i.max),r.flagUpdate()},s.Group.prototype.tick=function(e){var t,i=this.emitters,r=i.length,n=e||this.fixedTimeStep,o=this.attributeKeys,a=this.attributes;if(this._updateUniforms(n),this._resetBufferRanges(),0!==r||!1!==this._attributesNeedRefresh||!1!==this._attributesNeedDynamicReset){for(var s,t=0;r>t;++t)s=i[t],s.tick(n),this._updateBuffers(s);if(!0===this._attributesNeedDynamicReset){for(t=this.attributeCount-1;t>=0;--t)a[o[t]].resetDynamic();this._attributesNeedDynamicReset=!1}if(!0===this._attributesNeedRefresh){for(t=this.attributeCount-1;t>=0;--t)a[o[t]].forceUpdateAll();this._attributesNeedRefresh=!1,this._attributesNeedDynamicReset=!0}}},s.Group.prototype.dispose=function(){return this.geometry.dispose(),this.material.dispose(),this},s.Emitter=function(e){var t=s.utils,i=t.types,r=s.valueOverLifetimeLength;e=t.ensureTypedArg(e,i.OBJECT,{}),e.position=t.ensureTypedArg(e.position,i.OBJECT,{}),e.velocity=t.ensureTypedArg(e.velocity,i.OBJECT,{}),e.acceleration=t.ensureTypedArg(e.acceleration,i.OBJECT,{}),e.radius=t.ensureTypedArg(e.radius,i.OBJECT,{}),e.drag=t.ensureTypedArg(e.drag,i.OBJECT,{}),e.rotation=t.ensureTypedArg(e.rotation,i.OBJECT,{}),e.color=t.ensureTypedArg(e.color,i.OBJECT,{}),e.opacity=t.ensureTypedArg(e.opacity,i.OBJECT,{}),e.size=t.ensureTypedArg(e.size,i.OBJECT,{}),e.angle=t.ensureTypedArg(e.angle,i.OBJECT,{}),e.wiggle=t.ensureTypedArg(e.wiggle,i.OBJECT,{}),e.maxAge=t.ensureTypedArg(e.maxAge,i.OBJECT,{}),e.onParticleSpawn&&console.warn("onParticleSpawn has been removed. Please set properties directly to alter values at runtime."),this.uuid=a.Math.generateUUID(),this.type=t.ensureTypedArg(e.type,i.NUMBER,s.distributions.BOX),this.position={_value:t.ensureInstanceOf(e.position.value,a.Vector3,new a.Vector3),_spread:t.ensureInstanceOf(e.position.spread,a.Vector3,new a.Vector3),_spreadClamp:t.ensureInstanceOf(e.position.spreadClamp,a.Vector3,new a.Vector3),_distribution:t.ensureTypedArg(e.position.distribution,i.NUMBER,this.type),_randomise:t.ensureTypedArg(e.position.randomise,i.BOOLEAN,!1),_radius:t.ensureTypedArg(e.position.radius,i.NUMBER,10),_radiusScale:t.ensureInstanceOf(e.position.radiusScale,a.Vector3,new a.Vector3(1,1,1)),_distributionClamp:t.ensureTypedArg(e.position.distributionClamp,i.NUMBER,0)},this.velocity={_value:t.ensureInstanceOf(e.velocity.value,a.Vector3,new a.Vector3),_spread:t.ensureInstanceOf(e.velocity.spread,a.Vector3,new a.Vector3),_distribution:t.ensureTypedArg(e.velocity.distribution,i.NUMBER,this.type),_randomise:t.ensureTypedArg(e.position.randomise,i.BOOLEAN,!1)},this.acceleration={_value:t.ensureInstanceOf(e.acceleration.value,a.Vector3,new a.Vector3),_spread:t.ensureInstanceOf(e.acceleration.spread,a.Vector3,new a.Vector3),_distribution:t.ensureTypedArg(e.acceleration.distribution,i.NUMBER,this.type),_randomise:t.ensureTypedArg(e.position.randomise,i.BOOLEAN,!1)},this.drag={_value:t.ensureTypedArg(e.drag.value,i.NUMBER,0),_spread:t.ensureTypedArg(e.drag.spread,i.NUMBER,0),_randomise:t.ensureTypedArg(e.position.randomise,i.BOOLEAN,!1)},this.wiggle={_value:t.ensureTypedArg(e.wiggle.value,i.NUMBER,0),_spread:t.ensureTypedArg(e.wiggle.spread,i.NUMBER,0)},this.rotation={_axis:t.ensureInstanceOf(e.rotation.axis,a.Vector3,new a.Vector3(0,1,0)),_axisSpread:t.ensureInstanceOf(e.rotation.axisSpread,a.Vector3,new a.Vector3),_angle:t.ensureTypedArg(e.rotation.angle,i.NUMBER,0),_angleSpread:t.ensureTypedArg(e.rotation.angleSpread,i.NUMBER,0),_static:t.ensureTypedArg(e.rotation.static,i.BOOLEAN,!1),_center:t.ensureInstanceOf(e.rotation.center,a.Vector3,this.position._value.clone()),_randomise:t.ensureTypedArg(e.position.randomise,i.BOOLEAN,!1)},this.maxAge={_value:t.ensureTypedArg(e.maxAge.value,i.NUMBER,2),_spread:t.ensureTypedArg(e.maxAge.spread,i.NUMBER,0)},this.color={_value:t.ensureArrayInstanceOf(e.color.value,a.Color,new a.Color),_spread:t.ensureArrayInstanceOf(e.color.spread,a.Vector3,new a.Vector3),_randomise:t.ensureTypedArg(e.position.randomise,i.BOOLEAN,!1)},this.opacity={_value:t.ensureArrayTypedArg(e.opacity.value,i.NUMBER,1),_spread:t.ensureArrayTypedArg(e.opacity.spread,i.NUMBER,0),_randomise:t.ensureTypedArg(e.position.randomise,i.BOOLEAN,!1)},this.size={_value:t.ensureArrayTypedArg(e.size.value,i.NUMBER,1),_spread:t.ensureArrayTypedArg(e.size.spread,i.NUMBER,0),_randomise:t.ensureTypedArg(e.position.randomise,i.BOOLEAN,!1)},this.angle={_value:t.ensureArrayTypedArg(e.angle.value,i.NUMBER,0),_spread:t.ensureArrayTypedArg(e.angle.spread,i.NUMBER,0),_randomise:t.ensureTypedArg(e.position.randomise,i.BOOLEAN,!1)},this.particleCount=t.ensureTypedArg(e.particleCount,i.NUMBER,100),this.duration=t.ensureTypedArg(e.duration,i.NUMBER,null),this.isStatic=t.ensureTypedArg(e.isStatic,i.BOOLEAN,!1),this.activeMultiplier=t.ensureTypedArg(e.activeMultiplier,i.NUMBER,1),this.direction=t.ensureTypedArg(e.direction,i.NUMBER,1),this.alive=t.ensureTypedArg(e.alive,i.BOOLEAN,!0),this.particlesPerSecond=0,this.activationIndex=0,this.attributeOffset=0,this.attributeEnd=0,this.age=0,this.activeParticleCount=0,this.group=null,this.attributes=null,this.paramsArray=null,this.resetFlags={position:t.ensureTypedArg(e.position.randomise,i.BOOLEAN,!1)||t.ensureTypedArg(e.radius.randomise,i.BOOLEAN,!1),velocity:t.ensureTypedArg(e.velocity.randomise,i.BOOLEAN,!1),acceleration:t.ensureTypedArg(e.acceleration.randomise,i.BOOLEAN,!1)||t.ensureTypedArg(e.drag.randomise,i.BOOLEAN,!1),rotation:t.ensureTypedArg(e.rotation.randomise,i.BOOLEAN,!1),rotationCenter:t.ensureTypedArg(e.rotation.randomise,i.BOOLEAN,!1),size:t.ensureTypedArg(e.size.randomise,i.BOOLEAN,!1),color:t.ensureTypedArg(e.color.randomise,i.BOOLEAN,!1),opacity:t.ensureTypedArg(e.opacity.randomise,i.BOOLEAN,!1),angle:t.ensureTypedArg(e.angle.randomise,i.BOOLEAN,!1)},this.updateFlags={},this.updateCounts={},this.updateMap={maxAge:"params",position:"position",velocity:"velocity",acceleration:"acceleration",drag:"acceleration",wiggle:"params",rotation:"rotation",size:"size",color:"color",opacity:"opacity",angle:"angle"};for(var n in this.updateMap)this.updateMap.hasOwnProperty(n)&&(this.updateCounts[this.updateMap[n]]=0,this.updateFlags[this.updateMap[n]]=!1,this._createGetterSetters(this[n],n));this.bufferUpdateRanges={},this.attributeKeys=null,this.attributeCount=0,t.ensureValueOverLifetimeCompliance(this.color,r,r),t.ensureValueOverLifetimeCompliance(this.opacity,r,r),t.ensureValueOverLifetimeCompliance(this.size,r,r),t.ensureValueOverLifetimeCompliance(this.angle,r,r)},s.Emitter.constructor=s.Emitter,s.Emitter.prototype._createGetterSetters=function(e,t){var i=this;for(var r in e)if(e.hasOwnProperty(r)){var n=r.replace("_","");Object.defineProperty(e,n,{get:function(e){return function(){return this[e]}}(r),set:function(e){return function(r){var n=i.updateMap[t],o=this[e],a=s.valueOverLifetimeLength;"_rotationCenter"===e?(i.updateFlags.rotationCenter=!0,i.updateCounts.rotationCenter=0):"_randomise"===e?i.resetFlags[n]=r:(i.updateFlags[n]=!0,i.updateCounts[n]=0),i.group._updateDefines(),this[e]=r,Array.isArray(o)&&s.utils.ensureValueOverLifetimeCompliance(i[t],a,a)}}(r)})}},s.Emitter.prototype._setBufferUpdateRanges=function(e){this.attributeKeys=e,this.attributeCount=e.length;for(var t=this.attributeCount-1;t>=0;--t)this.bufferUpdateRanges[e[t]]={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY}},s.Emitter.prototype._calculatePPSValue=function(e){var t=this.particleCount;this.duration?this.particlesPerSecond=t/(e<this.duration?e:this.duration):this.particlesPerSecond=t/e},s.Emitter.prototype._setAttributeOffset=function(e){this.attributeOffset=e,this.activationIndex=e,this.activationEnd=e+this.particleCount},s.Emitter.prototype._assignValue=function(e,t){switch(e){case"position":this._assignPositionValue(t);break;case"velocity":case"acceleration":this._assignForceValue(t,e);break;case"size":case"opacity":this._assignAbsLifetimeValue(t,e);break;case"angle":this._assignAngleValue(t);break;case"params":this._assignParamsValue(t);break;case"rotation":this._assignRotationValue(t);break;case"color":this._assignColorValue(t)}},s.Emitter.prototype._assignPositionValue=function(e){var t=s.distributions,i=s.utils,r=this.position,n=this.attributes.position,o=r._value,a=r._spread;switch(r._distribution){case t.BOX:i.randomVector3(n,e,o,a,r._spreadClamp);break;case t.SPHERE:i.randomVector3OnSphere(n,e,o,r._radius,r._spread.x,r._radiusScale,r._spreadClamp.x,r._distributionClamp||this.particleCount);break;case t.DISC:i.randomVector3OnDisc(n,e,o,r._radius,r._spread.x,r._radiusScale,r._spreadClamp.x)}},s.Emitter.prototype._assignForceValue=function(e,t){var i,r,n,o,a,l=s.distributions,u=s.utils,c=this[t],p=c._value,d=c._spread;switch(c._distribution){case l.BOX:u.randomVector3(this.attributes[t],e,p,d);break;case l.SPHERE:i=this.attributes.position.typedArray.array,a=3*e,r=i[a],n=i[a+1],o=i[a+2],u.randomDirectionVector3OnSphere(this.attributes[t],e,r,n,o,this.position._value,c._value.x,c._spread.x);break;case l.DISC:i=this.attributes.position.typedArray.array,a=3*e,r=i[a],n=i[a+1],o=i[a+2],u.randomDirectionVector3OnDisc(this.attributes[t],e,r,n,o,this.position._value,c._value.x,c._spread.x)}if("acceleration"===t){var h=u.clamp(u.randomFloat(this.drag._value,this.drag._spread),0,1);this.attributes.acceleration.typedArray.array[4*e+3]=h}},s.Emitter.prototype._assignAbsLifetimeValue=function(e,t){var i,r=this.attributes[t].typedArray,n=this[t],o=s.utils;o.arrayValuesAreEqual(n._value)&&o.arrayValuesAreEqual(n._spread)?(i=Math.abs(o.randomFloat(n._value[0],n._spread[0])),r.setVec4Components(e,i,i,i,i)):r.setVec4Components(e,Math.abs(o.randomFloat(n._value[0],n._spread[0])),Math.abs(o.randomFloat(n._value[1],n._spread[1])),Math.abs(o.randomFloat(n._value[2],n._spread[2])),Math.abs(o.randomFloat(n._value[3],n._spread[3])))},s.Emitter.prototype._assignAngleValue=function(e){var t,i=this.attributes.angle.typedArray,r=this.angle,n=s.utils;n.arrayValuesAreEqual(r._value)&&n.arrayValuesAreEqual(r._spread)?(t=n.randomFloat(r._value[0],r._spread[0]),i.setVec4Components(e,t,t,t,t)):i.setVec4Components(e,n.randomFloat(r._value[0],r._spread[0]),n.randomFloat(r._value[1],r._spread[1]),n.randomFloat(r._value[2],r._spread[2]),n.randomFloat(r._value[3],r._spread[3]))},s.Emitter.prototype._assignParamsValue=function(e){this.attributes.params.typedArray.setVec4Components(e,this.isStatic?1:0,0,Math.abs(s.utils.randomFloat(this.maxAge._value,this.maxAge._spread)),s.utils.randomFloat(this.wiggle._value,this.wiggle._spread))},s.Emitter.prototype._assignRotationValue=function(e){this.attributes.rotation.typedArray.setVec3Components(e,s.utils.getPackedRotationAxis(this.rotation._axis,this.rotation._axisSpread),s.utils.randomFloat(this.rotation._angle,this.rotation._angleSpread),this.rotation._static?0:1),this.attributes.rotationCenter.typedArray.setVec3(e,this.rotation._center)},s.Emitter.prototype._assignColorValue=function(e){s.utils.randomColorAsHex(this.attributes.color,e,this.color._value,this.color._spread)},s.Emitter.prototype._resetParticle=function(e){for(var t,i,r=this.resetFlags,n=this.updateFlags,o=this.updateCounts,a=this.attributeKeys,s=this.attributeCount-1;s>=0;--s)t=a[s],i=n[t],!0!==r[t]&&!0!==i||(this._assignValue(t,e),this._updateAttributeUpdateRange(t,e),!0===i&&o[t]===this.particleCount?(n[t]=!1,o[t]=0):1==i&&++o[t])},s.Emitter.prototype._updateAttributeUpdateRange=function(e,t){var i=this.bufferUpdateRanges[e];i.min=Math.min(t,i.min),i.max=Math.max(t,i.max)},s.Emitter.prototype._resetBufferRanges=function(){var e,t=this.bufferUpdateRanges,i=this.bufferUpdateKeys,r=this.bufferUpdateCount-1;for(r;r>=0;--r)e=i[r],t[e].min=Number.POSITIVE_INFINITY,t[e].max=Number.NEGATIVE_INFINITY},s.Emitter.prototype._onRemove=function(){this.particlesPerSecond=0,this.attributeOffset=0,this.activationIndex=0,this.activeParticleCount=0,this.group=null,this.attributes=null,this.paramsArray=null,this.age=0},s.Emitter.prototype._decrementParticleCount=function(){--this.activeParticleCount},s.Emitter.prototype._incrementParticleCount=function(){++this.activeParticleCount},s.Emitter.prototype._checkParticleAges=function(e,t,i,r){for(var n,o,a,s,l=t-1;l>=e;--l)n=4*l,0!==(s=i[n])&&(a=i[n+1],o=i[n+2],1===this.direction?(a+=r)>=o&&(a=0,s=0,this._decrementParticleCount()):0>=(a-=r)&&(a=o,s=0,this._decrementParticleCount()),i[n]=s,i[n+1]=a,this._updateAttributeUpdateRange("params",l))},s.Emitter.prototype._activateParticles=function(e,t,i,r){for(var n,o,a=this.direction,s=e;t>s;++s)n=4*s,0!=i[n]&&1!==this.particleCount||(this._incrementParticleCount(),i[n]=1,this._resetParticle(s),o=r*(s-e),i[n+1]=-1===a?i[n+2]-o:o,this._updateAttributeUpdateRange("params",s))},s.Emitter.prototype.tick=function(e){if(!this.isStatic){null===this.paramsArray&&(this.paramsArray=this.attributes.params.typedArray.array);var t=this.attributeOffset,i=t+this.particleCount,r=this.paramsArray,n=this.particlesPerSecond*this.activeMultiplier*e,o=this.activationIndex;if(this._resetBufferRanges(),this._checkParticleAges(t,i,r,e),!1===this.alive)return void(this.age=0);if(null!==this.duration&&this.age>this.duration)return this.alive=!1,void(this.age=0);var a=1===this.particleCount?o:0|o,s=Math.min(a+n,this.activationEnd),l=s-this.activationIndex|0,u=l>0?e/l:0;this._activateParticles(a,s,r,u),this.activationIndex+=n,this.activationIndex>i&&(this.activationIndex=t),this.age+=e}},s.Emitter.prototype.reset=function(e){if(this.age=0,this.alive=!1,!0===e){for(var t,i=this.attributeOffset,r=i+this.particleCount,n=this.paramsArray,o=this.attributes.params.bufferAttribute,a=r-1;a>=i;--a)t=4*a,n[t]=0,n[t+1]=0;o.updateRange.offset=0,o.updateRange.count=-1,o.needsUpdate=!0}return this},s.Emitter.prototype.enable=function(){return this.alive=!0,this},s.Emitter.prototype.disable=function(){return this.alive=!1,this},s.Emitter.prototype.remove=function(){return null!==this.group?this.group.removeEmitter(this):console.error("Emitter does not belong to a group, cannot remove."),this}}],[8]);