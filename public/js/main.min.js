webpackJsonp([0],[,function(e,t,o){"use strict";var n=o(2),r=o(0),a=e.exports=new Map;a.set("time",Date.now()),a.set("controls",{}),a.set("scene",new n.Scene),a.set("renderer",new n.WebGLRenderer),a.set("camera",new n.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,5e3)),a.set("sphereBody",{}),a.set("player",{}),a.set("world",new r.World),a.set("load",function(e,t){t=t||{},e.castShadow=!0,e.recieveShadow=!0;for(var o=[],n=[],s=0;s<e.geometry.vertices.length;s++){var i=e.geometry.vertices[s];o.push(new r.Vec3(i.x,i.y,i.z))}for(var s=0;s<e.geometry.faces.length;s++){var c=e.geometry.faces[s];n.push([c.a,c.b,c.c])}var l=new r.ConvexPolyhedron(o,n),d=new r.Body({mass:t.mass||0,material:t.material||void 0});return d.addShape(l),d.position.copy(e.position),d.quaternion.copy(e.quaternion),a.get("world").add(d),{body:d,shape:l,mesh:e}})},,function(e,t,o){"use strict";function n(){a.get("camera").aspect=window.innerWidth/window.innerHeight,a.get("camera").updateProjectionMatrix(),s.setSize(window.innerWidth,window.innerHeight)}var r=o(2),a=(o(0),o(1)),s=a.get("renderer"),i=a.get("scene");e.exports=function(){i.fog=new r.Fog(16777215,0,500);var e=new r.AmbientLight(1118481);i.add(e);var t=new r.SpotLight(16777215);t.position.set(10,30,20),t.target.position.set(0,0,0),t.castShadow=!0,t.shadow.camera.near=20,t.shadow.camera.far=50,t.shadow.camera.fov=40,t.shadowMapBias=.1,t.shadowMapDarkness=.7,t.shadow.mapSize.width=1024,t.shadow.mapSize.height=1024,i.add(t);var c={time:{value:1},resolution:{value:new r.Vector2}};setInterval(function(){c.time.value+=.1;var e=Math.sin(2.1),o=Math.cos(2.1);t.position.set(450*e,600*e,600*o)},40);for(var l=["rightax2","leftax2","topax2","","frontax2","backax2"],d=new r.CubeGeometry(2e3,2e3,2e3),u=[],m=0;m<6;m++)u.push(new r.MeshBasicMaterial({map:r.ImageUtils.loadTexture("/assets/skybox/"+l[m]+".jpg"),side:r.BackSide,fog:!1}));var p=new r.MeshFaceMaterial(u),w=new r.Mesh(d,p);i.add(w);var g=o(8);a.set("controls",new g(a.get("camera"),a.get("sphereBody"))),i.add(a.get("controls").getObject()),o(9)(a.get("controls")),(new r.ObjectLoader).load("/assets/3d/skjar-isles/skjar-isles.json",function(e){i.add(e),e.traverse(function(e){e instanceof r.Mesh&&!/NP/gi.test(e.name)&&a.get("load")(e)})}),s.shadowMap.enabled=!0,s.shadowMapSoft=!0,s.setSize(window.innerWidth,window.innerHeight),s.setClearColor(i.fog.color,1),document.body.appendChild(s.domElement),window.addEventListener("resize",n,!1)}},function(e,t,o){"use strict";var n=o(1);e.exports=function e(){requestAnimationFrame(e),n.get("controls").enabled&&n.get("world").step(1/60),n.get("controls").update(Date.now()-n.get("time")),n.get("renderer").render(n.get("scene"),n.get("camera")),n.set("time",Date.now())}},function(e,t,o){"use strict";var n=o(0),r=o(1),a=r.get("world");e.exports=function(){a.quatNormalizeSkip=0,a.quatNormalizeFast=!1;var e=new n.GSSolver;a.defaultContactMaterial.contactEquationStiffness=1e9,a.defaultContactMaterial.contactEquationRelaxation=4,e.iterations=7,e.tolerance=.1;a.solver=new n.SplitSolver(e),a.gravity.set(0,-20,0),a.broadphase=new n.NaiveBroadphase;var t=new n.Material("slipperyMaterial"),o=new n.ContactMaterial(t,t,0,.3);a.addContactMaterial(o);var s=new n.Sphere(1.3);r.set("sphereBody",new n.Body({mass:5})),r.get("sphereBody").addShape(s),r.get("sphereBody").position.set(0,10,0),r.get("sphereBody").linearDamping=.9,a.add(r.get("sphereBody"))}},function(module,exports,__webpack_require__){"use strict";var THREE=__webpack_require__(2),CANNON=__webpack_require__(0),$=__webpack_require__(10),globals=__webpack_require__(1);module.exports=function(){function handle_mousedown(e){function t(e){var t=n.offset0.left+(e.pageX-n.pageX0),o=n.offset0.top+(e.pageY-n.pageY0);$(n.elem).offset({top:o,left:t})}function o(e){$("body").off("mousemove",t).off("mouseup",o)}var n={};n.pageX0=e.pageX,n.pageY0=e.pageY,n.elem=this,n.offset0=$(this).offset(),$("body").on("mouseup",o).on("mousemove",t)}console._log=console.log,console._warn=console.warn,console._error=console.error,console.log=function(){var e=[];for(var t in arguments)e.push(arguments[t]);document.getElementById("console-logarea").innerHTML+='<p style="color:white;font-size:11px;text-indent:5px;"> > '+e+"</p>",console._log(e),$("#console-logarea").scrollTop(1e10)},console.warn=function(){var e=[];for(var t in arguments)/^.vertices\[/gi.test(arguments[t])||e.push(arguments[t]);e.length&&(document.getElementById("console-logarea").innerHTML+='<p style="color:yellow;font-size:11px;text-indent:5px;"> > '+e+"</p>"),e.length&&console._log(e),$("#console-logarea").scrollTop(1e10)},console.error=function(){var e=[];for(var t in arguments)/right hand rule/gi.test(arguments[t])||e.push(arguments[t]);e.length&&(document.getElementById("console-logarea").innerHTML+='<p style="color:red;font-size:11px;text-indent:5px;"> > '+e+"</p>"),e.length&&console._error(e),$("#console-logarea").scrollTop(1e10)},document.getElementById("console-input").addEventListener("keypress",function(e){if(13==e.keyCode){try{var cmd=eval($("#console-input").val());-1==["function","undefined",void 0,"null"].indexOf(cmd)&&console.log(JSON.stringify(cmd))}catch(e){console.error(e)}$("#console-input").val("")}}),$("#console").mousedown(handle_mousedown),$(document).on("keyup",function(e){e.shiftKey&&192==e.keyCode&&$("#console").toggle()})}},function(e,t,o){"use strict";o(6)(),o(5)(),o(3)(),o(4)()},function(e,t,o){"use strict";var n=o(2),r=o(0);e.exports=function(e,t){var o=this,a=new n.Object3D;a.add(e);var s=new n.Object3D;s.position.y=2,s.add(a);var i=new n.Quaternion,c=!1,l=!1,d=!1,u=!1,m=!1,p=new r.Vec3,w=new r.Vec3(0,1,0);t.addEventListener("collide",function(e){var o=e.contact;o.bi.id==t.id?o.ni.negate(p):p.copy(o.ni),p.dot(w)>.5&&(m=!0)});var g=t.velocity,f=Math.PI/2,v=function(e){if(!1!==o.enabled){var t=e.movementX||e.mozMovementX||e.webkitMovementX||0,n=e.movementY||e.mozMovementY||e.webkitMovementY||0;s.rotation.y-=.002*t,a.rotation.x-=.002*n,a.rotation.x=Math.max(-f,Math.min(f,a.rotation.x))}},h=function(e){switch(e.keyCode){case 38:case 87:c=!0;break;case 37:case 65:d=!0;break;case 40:case 83:l=!0;break;case 39:case 68:u=!0;break;case 32:!0===m&&(g.y=20),m=!1}},y=function(e){switch(e.keyCode){case 38:case 87:c=!1;break;case 37:case 65:d=!1;break;case 40:case 83:l=!1;break;case 39:case 68:u=!1}};document.addEventListener("mousemove",v,!1),document.addEventListener("keydown",h,!1),document.addEventListener("keyup",y,!1),this.enabled=!1,this.getObject=function(){return s},this.getDirection=function(e){e.set(0,0,-1),i.multiplyVector3(e)};var k=new n.Vector3,b=new n.Euler;this.update=function(e){!1!==o.enabled&&(e*=.1,k.set(0,0,0),c&&(k.z=-.2*e),l&&(k.z=.2*e),d&&(k.x=-.2*e),u&&(k.x=.2*e),b.x=a.rotation.x,b.y=s.rotation.y,b.order="XYZ",i.setFromEuler(b),k.applyQuaternion(i),g.x+=k.x,g.z+=k.z,s.position.copy(t.position))}}},function(e,t,o){"use strict";e.exports=function(e){var t=document.getElementById("blocker"),o=document.getElementById("instructions");if("pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document){var n=document.body,r=function(r){document.pointerLockElement===n||document.mozPointerLockElement===n||document.webkitPointerLockElement===n?(e.enabled=!0,t.style.display="none"):(e.enabled=!1,t.style.display="-webkit-box",t.style.display="-moz-box",t.style.display="box",o.style.display="")},a=function(e){o.style.display=""};document.addEventListener("pointerlockchange",r,!1),document.addEventListener("mozpointerlockchange",r,!1),document.addEventListener("webkitpointerlockchange",r,!1),document.addEventListener("pointerlockerror",a,!1),document.addEventListener("mozpointerlockerror",a,!1),document.addEventListener("webkitpointerlockerror",a,!1),o.addEventListener("click",function(e){if(o.style.display="none",n.requestPointerLock=n.requestPointerLock||n.mozRequestPointerLock||n.webkitRequestPointerLock,/Firefox/i.test(navigator.userAgent)){var t=function e(t){document.fullscreenElement!==n&&document.mozFullscreenElement!==n&&document.mozFullScreenElement!==n||(document.removeEventListener("fullscreenchange",e),document.removeEventListener("mozfullscreenchange",e),n.requestPointerLock())};document.addEventListener("fullscreenchange",t,!1),document.addEventListener("mozfullscreenchange",t,!1),n.requestFullscreen=n.requestFullscreen||n.mozRequestFullscreen||n.mozRequestFullScreen||n.webkitRequestFullscreen,n.requestFullscreen()}else n.requestPointerLock()},!1)}else o.innerHTML="Your browser doesn't seem to support Pointer Lock API"}}],[7]);