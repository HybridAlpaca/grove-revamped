webpackJsonp([0],[function(e,t,n){"use strict";function o(e,t,n,o,i,a){e.beginPath(),e.moveTo(t+a,n),e.lineTo(t+o-a,n),e.quadraticCurveTo(t+o,n,t+o,n+a),e.lineTo(t+o,n+i-a),e.quadraticCurveTo(t+o,n+i,t+o-a,n+i),e.lineTo(t+a,n+i),e.quadraticCurveTo(t,n+i,t,n+i-a),e.lineTo(t,n+a),e.quadraticCurveTo(t,n,t+a,n),e.closePath(),e.fill(),e.stroke()}var i=n(2),a=n(1),r=n(21),s=e.exports=new Map;s.set("time",Date.now()),s.set("tick",0),s.set("controls",{}),s.set("scene",new i.Scene),s.set("renderer",new i.WebGLRenderer),s.set("camera",new i.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,5e3)),s.set("listener",new i.AudioListener),s.get("camera").add(s.get("listener")),s.set("player",{}),s.set("entities",[]),s.set("tweens",[]),s.set("world",new a.World),s.set("events",r.channel("events")),s.set("load",function(e,t){t=t||{},e.castShadow=!0,e.receiveShadow=!0;for(var n=[],o=[],i=0;i<e.geometry.vertices.length;i++){var r=e.geometry.vertices[i];n.push(new a.Vec3(r.x,r.y,r.z))}for(var i=0;i<e.geometry.faces.length;i++){var l=e.geometry.faces[i];o.push([l.a,l.b,l.c])}var c=new a.ConvexPolyhedron(n,o),d=new a.Body({mass:t.mass||0,material:t.material||void 0});return d.addShape(c),d.position.copy(e.position),d.quaternion.copy(e.quaternion),s.get("world").add(d),{body:d,shape:c,mesh:e}}),s.set("label",function(e,t){void 0===t&&(t={});var n=t.hasOwnProperty("fontface")?t.fontface:"Arial",a=t.hasOwnProperty("fontsize")?t.fontsize:18,r=t.hasOwnProperty("borderThickness")?t.borderThickness:4,s=t.hasOwnProperty("borderColor")?t.borderColor:{r:0,g:0,b:0,a:1},l=t.hasOwnProperty("backgroundColor")?t.backgroundColor:{r:255,g:255,b:255,a:1},c=document.createElement("canvas"),d=c.getContext("2d");d.font="Bold "+a+"px "+n;var u=d.measureText(e),h=u.width;d.fillStyle="rgba("+l.r+","+l.g+","+l.b+","+l.a+")",d.strokeStyle="rgba("+s.r+","+s.g+","+s.b+","+s.a+")",d.lineWidth=r,o(d,r/2,r/2,h+r,1.4*a+r,6),d.fillStyle="rgba(0, 0, 0, 1.0)",d.fillText(e,r,a+r);var p=new i.Texture(c);p.needsUpdate=!0;var m=new i.SpriteMaterial({map:p,useScreenCoordinates:!1}),v=new i.Sprite(m);return v.scale.set(100,50,1),v})},,,function(e,t,n){"use strict";function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function e(t,n,o){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,o)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(o)},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=n(2),c=n(1),d=n(5),u=n(0),h=n(4),p=t.Entity=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Entity",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new l.Object3D,o=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new c.Body,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};a(this,e),console.log("Entity: "+t+" created"),this.id=t,this.uuid=Math.random(),this.events={},this.opts=r,this.sounds=this.opts.sounds||[];for(var s=new l.AudioLoader,d=0;d<this.sounds.length;d++)!function(e){s.load("/assets/sfx/"+o.sounds[e],function(t){o.sounds[e]=new l.PositionalAudio(u.get("listener")),o.sounds[e].setBuffer(t),o.sounds[e].setRefDistance(20),o.mesh.add(o.sounds[e]),o.sounds[e].onEnded(function(){return o.sounds[e].stop()})})}(d);this.mesh=n,this.mesh.name=this.id,this.body=i,u.get("scene").add(n),u.get("world").add(i),u.get("entities").push(this)}return s(e,[{key:"update",value:function(e){this.mesh.position.copy(this.body.position),this.callEvent("update")}},{key:"remove",value:function(){this.callEvent("remove"),u.get("scene").remove(this.mesh),u.get("world").remove(this.body),u.get("entities").splice(u.get("entities").indexOf(this),1)}},{key:"addEventListener",value:function(e,t){e in this.events||(this.events[e]=[]),this.events[e].push(t)}},{key:"removeEventListener",value:function(e,t){}},{key:"callEvent",value:function(e){if(e in this.events){var t=!0,n=!1,o=void 0;try{for(var i,a=this.events[e][Symbol.iterator]();!(t=(i=a.next()).done);t=!0){(0,i.value)()}}catch(e){n=!0,o=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw o}}}}}]),e}(),m=t.Living=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Living Entity",n=arguments[1],i=arguments[2],r=arguments[3];a(this,t);var s=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i,r));return s.lastDamaged=0,s.lastAttacked=0,s.hp=Number,s.hpMax=Number,s.mp=Number,s.mpMax=Number,s.stm=Number,s.stmMax=Number,s.str=Number,s.dex=Number,s.int=Number,s.cnt=Number,s.chr=Number,s.inv=new Set,s}return i(t,e),s(t,[{key:"attack",value:function(e){e.damage(this.dmg),this.lastAttacked=Date.now(),this.callEvent("attack")}},{key:"damage",value:function(e){this.hp-=e,this.hp<=0&&this.kill(),this.lastDamaged=Date.now(),this.callEvent("damage")}},{key:"heal",value:function(e){Date.now()-this.lastDamaged>3e3&&(this.hp+=e),this.hp>=this.hpMax&&(this.hp=this.hpMax),this.callEvent("heal")}},{key:"kill",value:function(){this.remove(),this.callEvent("kill")}},{key:"update",value:function(e){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this,e),u.get("tick")%50==0&&this.heal(1)}}]),t}(p),v=t.AI=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"AI",n=arguments[1],i=arguments[2],r=arguments[3];a(this,t);var s=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i,r));return s.target=null,s.seen=!1,s.tween=!1,s.hp=5,s.hpMax=5,s.mp=1,s.mpMax=1,s.stm=3,s.stmMax=3,s.str=1,s.dex=1,s.int=1,s.cnt=1,s.chr=1,s}return i(t,e),s(t,[{key:"update",value:function(e){var n=this;r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this,e);var o=this.mesh.position,i=!0,a=!1,s=void 0;try{for(var c,h=u.get("entities")[Symbol.iterator]();!(i=(c=h.next()).done);i=!0){var p=c.value;p.id!=this.id&&(o.distanceTo(p.mesh.position)>50||(this.target&&o.distanceTo(p.mesh.position)<o.distanceTo(this.target.mesh.position)?(this.target=p,this.sounds[0]&&this.sounds[0].play()):this.target||(this.target=p)))}}catch(e){a=!0,s=e}finally{try{!i&&h.return&&h.return()}finally{if(a)throw s}}this.target&&o.distanceTo(this.target.mesh.position)>50&&(this.target=null);var m=this.opts.speed||7;if(this.target){var v=this.target.mesh.position;if(!this.tween){this.tween=!0;var y=(new l.Euler).copy(this.mesh.rotation);this.mesh.lookAt(new l.Vector3(v.x,o.y,v.z));var f=(new l.Euler).copy(this.mesh.rotation);this.mesh.rotation.copy(y);var w=new d.Tween(this.mesh.rotation).to({x:y.x,y:f.y,z:y.z},60).start().onComplete(function(){n.tween=!1,u.get("tweens").splice(u.get("tweens").indexOf(w),1)});u.get("tweens").push(w)}o.distanceTo(v)>(this.opts.hostility<0?5:7)?(o.x<v.x?this.body.velocity.x++:o.x>v.x&&this.body.velocity.x--,o.z<v.z?this.body.velocity.z++:o.z>v.z&&this.body.velocity.z--):u.get("tick")%30==0&&this.opts.hostility<0&&this.attack(this.target)}this.body.velocity.x>m?this.body.velocity.x=m:this.body.velocity.x<-m&&(this.body.velocity.x=-m),this.body.velocity.z>m?this.body.velocity.z=m:this.body.velocity.z<-m&&(this.body.velocity.z=-m)}}]),t}(m);t.Item=function e(t){a(this,e),this.id=t,this.uuid=Math.random(),this.desc=String,this.weight=Number,this.value=Number,this.path={img:String,model:String}},t.Player=function(e){function t(){a(this,t);var e=new c.Sphere(1.3),n=new c.Body({mass:5});n.addShape(e),n.position.set(0,40,0),n.linearDamping=.9;var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Player",new l.Object3D,n));return i.hp=20,i.hpMax=20,i.spd=1,i.dmg=1,i}return i(t,e),s(t,[{key:"update",value:function(e){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this,e),h("#hp").html(this.hp+"/"+this.hpMax+" hp")}}]),t}(m),t.Enemy=function(e){function t(e,i){a(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,new l.Object3D,new c.Body,i)),s=n(18);if(!s[e])throw new Error("Error: cannot find enemy with id of "+e);var d=s[e];r.opts.hostility=-1,r.inv=d.inv;for(var h in d.stats)r[h]=d.stats[h];return(new l.ObjectLoader).load("/assets/3d/"+d.path+".json",function(e){var t=new c.Body({mass:5});t.addShape(new c.Sphere(1)),t.position.set(i.pos.x||10,i.pos.y||20,i.pos.z||10),t.linearDamping=.9,r.mesh=e,u.get("scene").add(r.mesh),r.body=t,u.get("world").add(r.body)}),r.addEventListener("kill",function(){var t=!0,o=!1,i=void 0;try{for(var a,s=r.inv[Symbol.iterator]();!(t=(a=s.next()).done);t=!0){var l=a.value;if(!n(19)[l.id])throw new Error("Error: cannot find item with id of "+e);var c=Math.round(Math.random()*l.max)+l.min;c>l.max&&(c=l.max),c&&Materialize.toast(l.id+" ("+c+") added",1e3)}}catch(e){o=!0,i=e}finally{try{!t&&s.return&&s.return()}finally{if(o)throw i}}}),r}return i(t,e),t}(v)},,,function(e,t,n){"use strict";function o(e){if(s.get("controls").enabled){var t=new a.Raycaster;if(t.set(s.get("camera").getWorldPosition(),s.get("camera").getWorldDirection()),l&&Date.now()-s.get("player").lastAttacked>1e3){var n=new r.Tween(l.rotation).to({x:[-Math.PI/2,0]},1e3).start();s.get("tweens").push(n),s.get("player").lastAttacked=Date.now()}var o=!0,i=!1,c=void 0;try{for(var d,u=s.get("entities")[Symbol.iterator]();!(o=(d=u.next()).done);o=!0){var h=d.value;t.intersectObjects(h.mesh.children,!0).length&&s.get("player").mesh.position.distanceTo(h.mesh.position)<5&&(h.callEvent("click"),s.get("player").attack(h))}}catch(e){i=!0,c=e}finally{try{!o&&u.return&&u.return()}finally{if(i)throw c}}}}function i(e){var t=new a.Raycaster;t.set(s.get("camera").getWorldPosition(),s.get("camera").getWorldDirection());var n=!0,o=!1,i=void 0;try{for(var r,l=s.get("entities")[Symbol.iterator]();!(n=(r=l.next()).done);n=!0){var c=r.value;t.intersectObjects(c.mesh.children,!0).length&&(c.callEvent("interact"),Materialize.toast("You have interacted.",400))}}catch(e){o=!0,i=e}finally{try{!n&&l.return&&l.return()}finally{if(o)throw i}}}var a=n(2),r=n(5),s=n(0),l=void 0;window.addEventListener("mousedown",function(e){2==e.which||4==e.button?i(e):o(e)}),window.addEventListener("keyup",function(e){return!(69==e.keyCode)||i()}),(new a.ObjectLoader).load("/assets/3d/sword/sword.json",function(e){s.get("camera").add(e),e.scale.set(.1,.1,.1),e.position.x++,e.position.y-=1.2,e.position.z-=1.25,l=e})},function(e,t,n){"use strict";function o(){a.get("camera").aspect=window.innerWidth/window.innerHeight,a.get("camera").updateProjectionMatrix(),r.setSize(window.innerWidth,window.innerHeight),console.log("Window resized to "+window.innerWidth+", "+window.innerHeight)}var i=n(2),a=(n(1),n(0)),r=a.get("renderer"),s=a.get("scene");e.exports=function(){s.fog=new i.Fog(16777215,0,500);var e=new i.AmbientLight(1118481);s.add(e);var t=new i.SpotLight(16777215);t.position.set(10,30,20),t.target.position.set(0,0,0),t.castShadow=!0,t.shadow.camera.left=-400,t.shadow.camera.right=400,t.shadow.camera.top=100,t.shadow.camera.bottom=-300,t.shadow.camera.near=20,t.shadow.camera.far=50,t.shadow.camera.fov=70,t.shadowMapBias=.1,t.shadowMapDarkness=.7,t.shadow.mapSize.width=1024,t.shadow.mapSize.height=1024,s.add(t);var l=new i.SpriteMaterial({map:new i.ImageUtils.loadTexture("/assets/img/glow.png"),color:16777215,transparent:!1,blending:i.AdditiveBlending}),c=new i.Sprite(l);c.scale.set(200,200,1),t.add(c);var d={time:{value:1},resolution:{value:new i.Vector2}};setInterval(function(){d.time.value+=.1;var e=Math.sin(2.1),n=Math.cos(2.1);t.position.set(450*e,600*e,600*n)},40);for(var u=["rightax2","leftax2","topax2","","frontax2","backax2"],h=new i.CubeGeometry(2e3,2e3,2e3),p=[],m=0;m<6;m++)p.push(new i.MeshBasicMaterial({map:i.ImageUtils.loadTexture("/assets/skybox/"+u[m]+".jpg"),side:i.BackSide,fog:!1}));var v=new i.MeshFaceMaterial(p),y=new i.Mesh(h,v);s.add(y);var f=n(12);a.set("controls",new f(a.get("camera"),a.get("player").body)),s.add(a.get("controls").getObject()),n(13)(a.get("controls")),(new i.ObjectLoader).load("/assets/3d/skjar-isles/skjar-isles.json",function(e){s.add(e),e.castShadow=!0,e.receiveShadow=!0,e.traverse(function(e){e.castShadow=!0,e.receiveShadow=!0,e instanceof i.Mesh&&!/NP/gi.test(e.name)&&(console.log("Loading "+e.name),a.get("load")(e))})}),r.shadowMap.enabled=!0,r.shadowMapSoft=!0,r.setSize(window.innerWidth,window.innerHeight),r.setClearColor(s.fog.color,1),document.body.appendChild(r.domElement),window.addEventListener("resize",o,!1)}},function(e,t,n){"use strict";var o=n(3),i=n(0);n(1);e.exports=function e(t){requestAnimationFrame(e),i.get("controls").enabled&&i.get("world").step(1/60);var n=!0,a=!1,r=void 0;try{for(var s,l=i.get("entities")[Symbol.iterator]();!(n=(s=l.next()).done);n=!0){s.value.update(t)}}catch(e){a=!0,r=e}finally{try{!n&&l.return&&l.return()}finally{if(a)throw r}}var c=!0,d=!1,u=void 0;try{for(var h,p=i.get("tweens")[Symbol.iterator]();!(c=(h=p.next()).done);c=!0){h.value.update(t)}}catch(e){d=!0,u=e}finally{try{!c&&p.return&&p.return()}finally{if(d)throw u}}if(i.get("entities").length<15){new o.Enemy("slime",{pos:{x:500*Math.random()-250,y:20,z:500*Math.random()-250}})}i.get("player").body.position.y<-200&&i.get("player").body.position.set(0,15,0),i.get("controls").update(Date.now()-i.get("time")),i.get("renderer").render(i.get("scene"),i.get("camera")),i.set("time",Date.now()),i.set("tick",i.get("tick")+1)}},function(e,t,n){"use strict";var o=n(3),i=n(1),a=(n(2),n(0)),r=a.get("world");e.exports=function(){r.quatNormalizeSkip=0,r.quatNormalizeFast=!1;var e=new i.GSSolver;r.defaultContactMaterial.contactEquationStiffness=1e9,r.defaultContactMaterial.contactEquationRelaxation=4,e.iterations=7,e.tolerance=.1;r.solver=new i.SplitSolver(e),r.gravity.set(0,-20,0),r.broadphase=new i.NaiveBroadphase;var t=new i.Material("slipperyMaterial"),n=new i.ContactMaterial(t,t,0,.3);r.addContactMaterial(n),a.set("player",new o.Player)}},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=(n(0),n(4)),a=function e(t,n){o(this,e),i("#gui-title").text(t),i("#gui-content").html(n),i("#gui").fadeIn(400)};t.default=a},function(e,t,n){"use strict";var o=n(10),i=function(e){return e&&e.__esModule?e:{default:e}}(o);window.onerror=alert,new i.default("The Grove",'Hello! Thanks for playing our little game :) The Grove is an action RPG inspired by such games as Skyrim, and aims to be playable all in your browser.  We know the 3D graphics are bad (chillax, we\'re a band of unruly 14 year olds), but we must say the 2D ones are pretty sweet - props to Hunter "Goont" Sokolis for those.  Anyway, helpful crticism and new ideas are always welcome, so pop right in and have the best 3 minutes of your life! ;)<br><br>Thanks for playing, HA Game Studios'),n(9)(),n(7)(),n(8)(),n(6)},function(e,t,n){"use strict";var o=n(2),i=n(1),a=n(0);e.exports=function(e,t){var n=new Audio("/assets/sfx/leaves01.ogg"),r=this,s=new o.Object3D;s.add(e);var l=new o.Object3D;l.position.y=2,l.add(s);var c=new o.Quaternion,d=!1,u=!1,h=!1,p=!1,m=!1,v=new i.Vec3,y=new i.Vec3(0,1,0);t.addEventListener("collide",function(e){var n=e.contact;n.bi.id==t.id?n.ni.negate(v):v.copy(n.ni),v.dot(y)>.5&&(m=!0)});var f=t.velocity,w=Math.PI/2,g=function(e){if(!1!==r.enabled){var t=e.movementX||e.mozMovementX||e.webkitMovementX||0,n=e.movementY||e.mozMovementY||e.webkitMovementY||0;l.rotation.y-=.002*t,s.rotation.x-=.002*n,s.rotation.x=Math.max(-w,Math.min(w,s.rotation.x))}},b=function(e){switch(e.keyCode){case 38:case 87:d=!0;break;case 37:case 65:h=!0;break;case 40:case 83:u=!0;break;case 39:case 68:p=!0;break;case 32:!0===m&&(f.y=20),m=!1}},k=function(e){switch(e.keyCode){case 38:case 87:d=!1;break;case 37:case 65:h=!1;break;case 40:case 83:u=!1;break;case 39:case 68:p=!1}};document.addEventListener("mousemove",g,!1),document.addEventListener("keydown",b,!1),document.addEventListener("keyup",k,!1),this.enabled=!1,this.getObject=function(){return l},this.getDirection=function(e){e.set(0,0,-1),c.multiplyVector3(e)};var x=new o.Vector3,E=new o.Euler;this.update=function(e){!1!==r.enabled&&(e*=.1,x.set(0,0,0),a.get("events").publish("player.move","foobar"),d&&(x.z=-.5*e),u&&(x.z=.5*e),h&&(x.x=-.5*e),p&&(x.x=.5*e),E.y=l.rotation.y,E.order="XYZ",c.setFromEuler(E),x.applyQuaternion(c),f.x+=x.x,f.z+=x.z,(Math.abs(f.x)>3||Math.abs(f.z)>3)&&m&&n.play(),l.position.copy(t.position))}}},function(e,t,n){"use strict";e.exports=function(e){var t=document.getElementById("blocker"),n=document.getElementById("instructions");if("pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document){var o=document.body,i=function(i){document.pointerLockElement===o||document.mozPointerLockElement===o||document.webkitPointerLockElement===o?(e.enabled=!0,t.style.display="none"):(e.enabled=!1,t.style.display="-webkit-box",t.style.display="-moz-box",t.style.display="box",n.style.display="")},a=function(e){n.style.display=""};document.addEventListener("pointerlockchange",i,!1),document.addEventListener("mozpointerlockchange",i,!1),document.addEventListener("webkitpointerlockchange",i,!1),document.addEventListener("pointerlockerror",a,!1),document.addEventListener("mozpointerlockerror",a,!1),document.addEventListener("webkitpointerlockerror",a,!1),n.addEventListener("click",function(e){if(n.style.display="none",o.requestPointerLock=o.requestPointerLock||o.mozRequestPointerLock||o.webkitRequestPointerLock,/Firefox/i.test(navigator.userAgent)){var t=function e(t){document.fullscreenElement!==o&&document.mozFullscreenElement!==o&&document.mozFullScreenElement!==o||(document.removeEventListener("fullscreenchange",e),document.removeEventListener("mozfullscreenchange",e),o.requestPointerLock())};document.addEventListener("fullscreenchange",t,!1),document.addEventListener("mozfullscreenchange",t,!1),o.requestFullscreen=o.requestFullscreen||o.mozRequestFullscreen||o.mozRequestFullScreen||o.webkitRequestFullscreen,o.requestFullscreen()}else o.requestPointerLock()},!1)}else n.innerHTML="Your browser doesn't seem to support Pointer Lock API"}},,,,,function(e,t){e.exports={slime:{name:"Slime",path:"slime/slime",id:"#000001",stats:{hp:3,hpMax:3,dmg:1,spd:1},inv:[{id:"gelatin",min:1,max:3}],mesh:{Box1:{transparent:!0,opacity:.3}}}}},function(e,t){e.exports={gelatin:{name:"Gelatin",id:"#000001",desc:"Like jello, but not edible.",weight:1,value:3}}}],[11]);